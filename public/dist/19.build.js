webpackJsonp([19],{146:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{}}}},147:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,"",""])},148:function(t,e,i){i(150);var o=i(1)(i(146),i(149),null,null);t.exports=o.exports},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"weui-mask_transparent"}),t._v(" "),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),i("p",{staticClass:"weui-toast__content"},[t._v("数据加载中")])])])}]}},150:function(t,e,i){var o=i(147);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("5de0c1c0",o,!0)},151:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(66);e.default={props:{offset:{type:Number,default:40},enableInfinite:{type:Boolean,default:!0},enableRefresh:{type:Boolean,default:!0},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1},isPageEnd:!1,isShowMoreText:{type:Boolean,default:!0},isNotRefresh:!0,cutHeight:0},data:function(){return{top:0,state:0,startY:0,touching:!1,infiniteLoading:!1,height:"height:100px"}},mounted:function(){var t=this;t.cutHeight||(t.cutHeight=0),this.height="height:"+(document.body.clientHeight-t.cutHeight)+"px",this.loadMoreText(),o.a.$on("scrollMoreTextInit",function(e){t.isShowMoreText=e,t.loadMoreText()}),o.a.$on("scrollHeightInit",function(e){t.cutHeight=e,t.initHeight()})},methods:{initHeight:function(){this.height="height:"+(document.body.clientHeight-this.cutHeight)+"px"},touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startScroll=this.$el.scrollTop||0,this.touching=!0},touchMove:function(t){if(this.enableRefresh&&!(this.$el.scrollTop>0)&&this.touching){var e=t.targetTouches[0].pageY-this.startY-this.startScroll;e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)}},touchEnd:function(t){if(this.enableRefresh){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0),this.loadMoreText()}},refresh:function(){this.state=2,this.top=this.offset,this.isNotRefresh?this.refreshDone():this.onRefresh(this.refreshDone)},refreshDone:function(){this.state=0,this.top=0},loadMoreText:function(){console.log(this.isShowMoreText),this.isShowMoreText?this.isPageEnd?($(".load-more").hide(),$(".load-finish").show()):($(".load-finish").hide(),$(".load-more").show()):($(".load-more").hide(),$(".load-finish").hide())},infinite:function(){console.log("Loading"),this.infiniteLoading=!0,this.onInfinite(this.infiniteDone)},infiniteDone:function(){console.log("done"),this.infiniteLoading=!1},onScroll:function(t){if(this.enableInfinite&&!this.infiniteLoading){var e=this.$el.clientHeight;this.$el.querySelector(".inner").clientHeight-e-this.$el.scrollTop-(this.onRefresh?this.$el.querySelector(".pull-refresh").clientHeight:0)<this.$el.querySelector(".load-more").clientHeight&&this.infinite()}}}}},152:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,"body,html{height:100%}.yo-scroll{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;-webkit-overflow-scrolling:touch;background:#f5f5f5}.yo-scroll .inner{position:absolute;top:-2rem;width:100%;transition-duration:.3s}.yo-scroll .pull-refresh{position:relative;left:0;top:0;width:100%;height:2rem;display:flex;align-items:center;justify-content:center}.yo-scroll.touch .inner{transition-duration:0ms}.yo-scroll.down .down-tip,.yo-scroll.refresh .refresh-tip,.yo-scroll.up .up-tip{display:block}.yo-scroll .down-tip,.yo-scroll .refresh-tip,.yo-scroll .up-tip{display:none}.yo-scroll .load-more{height:3rem;display:flex;align-items:center;justify-content:center;text-align:center}.yo-scroll .load-finish{height:2rem;text-align:center}.loadFont{font-size:12px;color:#999}",""])},153:function(t,e,i){i(155);var o=i(1)(i(151),i(154),null,null);t.exports=o.exports},154:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yo-scroll",class:{down:0===t.state,up:1==t.state,refresh:2===t.state,touch:t.touching},style:t.height,on:{touchstart:function(e){t.touchStart(e)},touchmove:function(e){t.touchMove(e)},touchend:function(e){t.touchEnd(e)},scroll:function(e){(t.onInfinite||t.infiniteLoading)&&t.onScroll(e)}}},[i("section",{staticClass:"inner",style:{transform:"translate3d(0, "+t.top+"px, 0)"}},[i("header",{staticClass:"pull-refresh"},[t._t("pull-refresh",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isNotRefresh,expression:"!isNotRefresh"}]},[i("span",{staticClass:"down-tip loadFont"},[t._v("下拉更新")]),t._v(" "),i("span",{staticClass:"up-tip loadFont"},[t._v("松开更新")]),t._v(" "),i("span",{staticClass:"refresh-tip loadFont"},[t._v("更新中")])])])],2),t._v(" "),t._t("default"),t._v(" "),i("footer",{staticClass:"load-more"},[t._t("load-more",[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.infiniteLoading,expression:"!infiniteLoading"}],staticClass:"loadFont"},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.infiniteLoading,expression:"infiniteLoading"}],staticClass:"loadFont"},[t._v("数据加载中..")])])],2),t._v(" "),i("footer",{staticClass:"load-finish",staticStyle:{display:"none"}},[t._t("load-finish",[i("span",{staticClass:"loadFont"},[t._v("已经加载完成")])])],2)],2)])},staticRenderFns:[]}},155:function(t,e,i){var o=i(152);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("18db66ab",o,!0)},231:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__bus_js__=__webpack_require__(66),__WEBPACK_IMPORTED_MODULE_1__lib_scroll_vue__=__webpack_require__(153),__WEBPACK_IMPORTED_MODULE_1__lib_scroll_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__lib_scroll_vue__),__WEBPACK_IMPORTED_MODULE_2__showLoad_vue__=__webpack_require__(148),__WEBPACK_IMPORTED_MODULE_2__showLoad_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__showLoad_vue__);__webpack_exports__.default={data:function(){return{list:[],page:1,row:15,isPageEnd:!1,isLoading:!1,isShowMoreText:!1,showLoad:!1,user:{}}},mounted:function(){this.getList(),this.getUserInfo()},methods:{getUserInfo:function getUserInfo(){var _this=this;_this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/_userId_"}).then(function(data){null!==data.data.data&&(_this.user=eval(data.data.data))},function(t){})},formatTime:function(t){return xqzs.dateTime.formatYearDate(t)},getList:function(t){var e=this,i=web.API_PATH+"coin/get/coin/detail/_userId_/"+e.page+"/"+e.row;console.log(e.isLoading),console.log(e.isPageEnd),e.isLoading||e.isPageEnd||(1==e.page&&(e.showLoad=!0),e.isLoading=!0,e.$http.get(i).then(function(i){if(t&&"function"==typeof t&&t(),e.showLoad=!1,e.isLoading=!1,1!=i.data.status)return void(e.list=[]);var o=i.data.data;o.length<e.row?(e.isPageEnd=!0,e.isShowMoreText=!1):e.isShowMoreText=!0,__WEBPACK_IMPORTED_MODULE_0__bus_js__.a.$emit("scrollMoreTextInit",e.isShowMoreText),1==e.page?e.list=o:e.list=e.list.concat(o),0!=o.length&&(e.page=e.page+1)},function(t){e.isLoading=!1,e.showLoad=!1}))},onInfinite:function(t){this.getList(t)},onRefresh:function(t){this.page=1,this.isPageEnd=!1,this.getList(t)}},components:{"v-scroll":__WEBPACK_IMPORTED_MODULE_1__lib_scroll_vue___default.a,"v-showLoad":__WEBPACK_IMPORTED_MODULE_2__showLoad_vue___default.a}}},310:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".coin_list .yo-scroll{background:#fff}.coin_list .no_coin_record{background:url("+i(398)+") no-repeat top;text-align:center;color:#fc9b2c;font-size:.88235rem;padding-top:11rem;width:100%;height:2rem;background-size:11.14705882352941rem;margin-top:6rem}.coin_list{background:#fff}.coin_list .my_coin{height:3.6rem;background:-webkit-gradient(linear,0 0,right 0,from(#f97f06),to(#ffb336));line-height:3.6rem;color:#fff;font-size:.9411764705882353rem;padding-left:1rem}.coin_list .my_coin span{font-size:1.764705882352941rem}.coin_list .list{margin-left:1rem}.coin_list .list .item{line-height:1;border-bottom:1px solid #eee;min-height:2.6rem;padding-top:.9rem;position:relative;padding-bottom:.5rem}.coin_list .list .item .name{font-size:.88235rem;color:#333;width:70%;line-height:1.4rem}.coin_list .list .item .time{color:#999;font-size:.7058823529411765rem;margin-top:.5rem}.coin_list .list .item .coin{position:absolute;top:0;right:1.233rem;line-height:4rem;color:#fc9b2c;font-size:1.411764705882353rem}.coin_list .list .item .coin.green{color:#00bd00}",""])},398:function(t,e,i){t.exports=i.p+"coin_list_no_record.png"},513:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coin_list"},[i("div",{directives:[{name:"title",rawName:"v-title"}]},[t._v("积分明细")]),t._v(" "),i("v-scroll",{attrs:{"on-refresh":t.onRefresh,"on-infinite":t.onInfinite,isPageEnd:t.isPageEnd,isShowMoreText:t.isShowMoreText}},[i("div",{staticClass:"my_coin"},[i("div",{staticClass:"word"},[t._v("当前积分："),i("span",[t._v(t._s(t.user.coinAmount))])])]),t._v(" "),i("div",{staticClass:"list"},t._l(t.list,function(e){return i("div",{staticClass:"item"},[i("div",{staticClass:"name"},[t._v(t._s(e.type)+"\n            "),e.name?i("span",[t._v("["+t._s(e.name)+"]")]):t._e()]),t._v(" "),i("div",{staticClass:"time"},[t._v(t._s(t.formatTime(e.addTime)))]),t._v(" "),i("div",{staticClass:"coin",class:{green:e.coinNum<0}},[e.coinNum>0?i("span",[t._v("+")]):t._e(),t._v(t._s(e.coinNum))])])})),t._v(" "),0!=t.list.length||t.isLoading?t._e():i("div",{staticClass:"no_coin_record"},[t._v("\n        没任何收获，快去做任务赚积分吧！\n    ")])])],1)},staticRenderFns:[]}},581:function(t,e,i){var o=i(310);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("44c32dea",o,!0)},90:function(t,e,i){i(581);var o=i(1)(i(231),i(513),null,null);t.exports=o.exports}});
//# sourceMappingURL=19.build.js.map?5c7fdce1