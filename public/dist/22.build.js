webpackJsonp([22],{146:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{}}}},147:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,"",""])},148:function(t,e,i){i(150);var o=i(1)(i(146),i(149),null,null);t.exports=o.exports},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"weui-mask_transparent"}),t._v(" "),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),i("p",{staticClass:"weui-toast__content"},[t._v("数据加载中")])])])}]}},150:function(t,e,i){var o=i(147);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("5de0c1c0",o,!0)},162:function(t,e,i){t.exports=i.p+"me_jt.png"},169:function(t,e,i){t.exports=i.p+"coin_close.png"},232:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__showLoad_vue__=__webpack_require__(148),__WEBPACK_IMPORTED_MODULE_0__showLoad_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__showLoad_vue__);__webpack_exports__.default={data:function(){return{goodsId:"",goods:{},showLoad:!1,address:null,user:{coinAmount:0},shareOnePersonCoin:5,check:!1}},mounted:function(){this.getDetail(),this.getAddress(),this.getUserInfo(),this.getTaskList()},methods:{change:function(){var t=this;return t.user.coinAmount<t.goods.coinNum?void this.getCoin():t.address?(this.check=!0,void this.$nextTick(function(){xqzs.weui.dialogCustom($("#check_change").html(),function(){$(".check_change").addClass("up").removeClass("down")},function(){$(".check_change").removeClass("up").addClass("down")}),$(".check_change .close").click(function(){$(".js_dialog .weui-mask").click()}),$(".check_change_btn").click(function(){t.changeCheck()})})):void xqzs.weui.tip("请先添加地址！",function(){t.goSetAdress()})},changeCheck:function(){var t=this;t.showLoad=!0,$(".check_change .close").click(),t.$http.post(web.API_PATH+"coin/buy/goods/"+t.goods.id+"/_userId_/"+t.address.addressId+"/1",{}).then(function(e){setTimeout(function(){if(t.showLoad=!1,1==e.body.status&&e.body.data){xqzs.weui.dialogCustom('<div class="get_coin">                    <div class="close"></div>                    <div class="img coin_change_success"></div>\n                    <div class="h1">恭喜你，兑换成功</div>\n                    <div class="con">请耐心等待，兑换成功后，将在1-3个工作日为你发货。</div>\n                    <div class="line"></div>\n                    <div class="info">(注：积分消费记录详情请在积分明细中查看）</div>\n                    <div class="btn coin_success_btn">OK</div>\n                </div>',function(){$(".get_coin .coin_success_btn").click(function(){t.$router.go(-1)}),$(".get_coin .close").click(function(){$(".js_dialog .weui-mask").click()})})}else 9000008==e.body.status?this.getCoin():9000009==e.body.status?xqzs.weui.tip("地址错误"):9000004==e.body.status&&xqzs.weui.tip("商品不足")},210)})},getCoin:function(){var t=this,e=this.goods;console.log(e);var i=Math.ceil((e.coinNum-this.user.coinAmount)/this.shareOnePersonCoin),o='<div class="get_coin">                    <div class="close"></div>';e.home_pic&&e.home_pic.path&&(o+='                    <div class="img"><img src="'+e.home_pic.path+'" /></div>\n'),o+='                    <div class="h1">积分不足</div>\n                    <div class="con">已有'+this.user.coinAmount+"积分，每邀请1位好友支持可得"+this.shareOnePersonCoin+"积分，<span>邀请"+i+'位好友</span>关注“好一点”公众号可立即兑换</div>\n                    <div class="line"></div>\n                    <div class="info">注：更多获取积分方式，请去每日任务查看</div>\n                    <div class="btn">邀请好友赚积分</div>\n                </div>',xqzs.weui.dialogCustom(o),$(".get_coin .close").click(function(){$(".js_dialog .weui-mask").click()}),$(".get_coin .btn").click(function(){t.showLoad=!0,$(".js_dialog .weui-mask").click(),t.$http.get(web.API_PATH+"coin/push/coin/card/_userId_/"+e.id).then(function(e){1==e.data.status&&(t.showLoad=!1,xqzs.weui.dialog({title:"邀请卡",msg:"前往公众号查看你的邀请卡",submitText:"查看",submitFun:function(){try{WeixinJSBridge.call("closeWindow")}catch(t){}}}))},function(e){t.showLoad=!1})})},getTaskList:function(){var t=this;this.$http.get(web.API_PATH+"coin/get/task/_userId_").then(function(e){for(var i=e.data.data,o=0;o<i.length;o++)if(7==i[o].type){t.shareOnePersonCoin=i[o].coinNum;break}})},getUserInfo:function getUserInfo(){var _this=this;_this.showLoad=!0,_this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/_userId_"}).then(function(data){_this.showLoad=!1,null!==data.data.data&&(_this.user=eval(data.data.data))},function(t){})},goSetAdress:function(){this.$router.push("address")},getAddress:function getAddress(){var _this=this;_this.$http({method:"GET",type:"json",url:web.API_PATH+"coin/get/address/_userId_"}).then(function(data){null!==data.data.data&&(_this.address=eval(data.data.data),_this.address.province&&(_this.provinceName=_this.address.province),_this.address.city&&(_this.cityName=_this.address.city),_this.address.area&&(_this.areaName=_this.address.area))},function(t){})},getDetail:function(){var t=this,e=this;e.showLoad=!0,e.goodsId=e.$route.query.goodsId,e.$http.get(web.API_PATH+"coin/get/goodsDetail/"+e.goodsId).then(function(i){console.log(i.data.data),e.showLoad=!1,e.goods=i.data.data,t.$nextTick(function(){new Swiper(".product_box_swiper",{pagination:".swiper-pagination"})}),e.goods.pictures.length<=1&&$(".swiper-pagination").hide()})}},components:{"v-showLoad":__WEBPACK_IMPORTED_MODULE_0__showLoad_vue___default.a},updated:function(){$(".product_top").height($(document).height()-$(".btn_bottom  ").height())}}},292:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".check_change{height:12rem;background:#fff;position:fixed;bottom:0;z-index:101001;left:0;width:100%}.check_change.up{-webkit-animation:go_top ease .3s forwards;animation:go_top ease .3s forwards}.check_change.down{-webkit-animation:go_down ease .3s forwards;animation:go_down ease .3s forwards}.check_change .img{margin-top:.88235rem;margin-left:.88235rem;display:inline-block;float:left;height:5.882352941176471rem}.check_change .line{height:1px;background:#f1f1f1;overflow:hidden;width:100%;margin-top:1rem}.check_change .close{background:url("+i(169)+") no-repeat;background-size:.823529411764706rem;height:.823529411764706rem;width:.823529411764706rem;position:absolute;right:.88235rem;top:.88235rem}.check_change img{max-width:5.882352941176471rem;max-height:5.882352941176471rem}.check_change .coin{display:inline-block;float:left;font-size:1.058823529411765rem;background:url("+i(395)+") no-repeat;background-size:.7647058823529412rem;padding-left:1rem;background-position:0 .3rem;margin-left:1rem;margin-top:1rem;color:#f93}@keyframes go_down{0%{transform:translateZ(0);-webkit-transform:translateZ(0)}to{transform:translate3d(0,100%,0);-webkit-transform:translate3d(0,100%,0)}}@keyframes go_top{0%{transform:translate3d(0,100%,0);-webkit-transform:translate3d(0,100%,0)}to{transform:translateZ(0);-webkit-transform:translateZ(0)}}.get_coin{position:fixed;z-index:1001;top:50%;left:50%;width:80%;height:26rem;margin-left:-40%;margin-top:-13rem;background:#fff;border-radius:.8rem;text-align:center;line-height:1}.get_coin .img{width:9.411764705882353rem;margin:0 auto;height:9.411764705882353rem;text-align:center;margin-top:1.647058823529412rem}.get_coin .img img{max-width:100%;max-height:100%}.get_coin .h1{margin-top:1rem;margin-bottom:1rem;font-size:1rem;color:#000;font-weight:700}.get_coin .con{font-size:.7647058823529412rem;color:#666;line-height:1.5rem;margin:0 1.5rem;text-align:left}.get_coin .con span{color:#333;font-weight:700}.get_coin .line{height:1px;width:85%;margin:.8rem auto;background:#f1f1f1}.get_coin .info{color:#666;font-size:.7647058823529412rem}.get_coin .btn{background:#f97f06;border-radius:.3rem;line-height:2rem;font-size:.8235rem;color:#fff;text-align:center;width:80%;margin:0 auto;position:absolute;bottom:1.3rem;left:50%;margin-left:-40%}.get_coin .close{background:url("+i(169)+") no-repeat;width:.823529411764706rem;background-size:.823529411764706rem;height:.823529411764706rem;position:absolute;top:.88235rem;right:.88235rem}.get_coin .coin_change_success{background:url("+i(393)+") no-repeat 50%;background-size:8.382352941176471rem}.product_box{background:#fff}.product_top{overflow-y:auto;-webkit-overflow-scrolling:touch}.product_top img{width:100%;display:block;margin-bottom:1px}.product_main{padding:1.0588235rem .88235rem .88235rem;background:#fff;border-bottom:.588235rem solid #f4f4f8}.product_main h3{font-size:1rem;color:#333;line-height:1.411764705882353rem;margin-bottom:.6rem}.product_main_del{color:#fc9b2c;font-size:1.5294rem;height:2rem;line-height:2rem;display:flex;position:relative;width:100%}.product_main_del span{font-size:.76471rem;display:block;margin-left:.6rem;margin-right:.6rem;margin-top:.2rem}.product_price{color:#b0aeae;font-size:.70588rem;text-decoration:line-through;margin-top:.2rem}.product_main_del .product_freight{position:absolute;right:0;text-decoration:none}.product_adress{border-bottom:1px solid #f4f4f8;font-size:.76471rem;color:#999;padding:1rem .88235rem;line-height:1;background:#fff;position:relative}.product_adress .right_go{position:absolute;right:.88235rem;width:16px;top:50%;margin-top:-8px}.product_adress:active{background:#f1f1f1}.product_adress i{font-style:normal;float:left}.product_adress span{color:#333}.product_detail_header{color:#333;font-size:.8235rem;line-height:2.94rem;background:#fff;padding:0 .88235rem}.adress_detail{float:left;margin-left:.588235rem}.adress_detail div{padding-top:.588235rem}.adress_detail .address_long{width:15rem;line-height:1.176470588235294rem}.product_detail{background:#fff}.product_detail .product_content{padding:0 .88235rem}video{max-width:100%}.btn_bottom{;position:absolute;bottom:0;width:100%;background:#fff;border-top:1px solid #eee}.btn_bottom .btn_change,.check_change .btn_change{background:#fc9b2c;border-radius:.3rem;margin:.88235rem;height:2.588235294117647rem;z-index:111;color:#fff;line-height:2.588235294117647rem;text-align:center}.btn_bottom .btn_change:active,.check_change .btn_change:active{background:#fc9b2c}.btn_bottom.overed .btn_change{background:#d9d9d9;color:#fff}.product_box .swiper-pagination-bullet-active{background:#fc9b2c}",""])},393:function(t,e,i){t.exports=i.p+"coin_change_success.png"},395:function(t,e,i){t.exports=i.p+"coin_coin_icon.png"},495:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"product_box"},[o("div",{directives:[{name:"title",rawName:"v-title"}]},[t._v("商品详情")]),t._v(" "),t.showLoad?o("v-showLoad"):t._e(),t._v(" "),o("div",{staticClass:"product_top"},[o("div",{staticClass:"swiper-container product_box_swiper"},[o("div",{staticClass:"swiper-wrapper"},t._l(t.goods.pictures,function(t){return o("div",{staticClass:"swiper-slide"},[o("img",{attrs:{src:t.path,alt:""}})])})),t._v(" "),o("div",{staticClass:"swiper-pagination"})]),t._v(" "),o("div",{staticClass:"product_main"},[o("h3",[t._v(t._s(t.goods.name))]),t._v(" "),o("div",{staticClass:"product_main_del"},[t._v(t._s(t.goods.coinNum)+"\n               "),o("span",[t._v("积分")]),t._v(" "),t._e(),t._v(" "),o("div",{staticClass:"product_price product_freight"},[t._v("运费：包邮")])])]),t._v(" "),o("div",{staticClass:"product_adress",on:{click:function(e){t.goSetAdress()}}},[o("i",[t._v("配送至：")]),t._v(" "),t.address?o("div",{staticClass:"adress_detail"},[o("span",[t._v(t._s(t.address.userName))]),t._v(" "),o("span",[t._v(t._s(t.address.mobile))]),t._v(" "),o("div",{staticClass:"address_long"},[t._v(t._s(t.provinceName)+" "+t._s(t.cityName)+" "+t._s(t.areaName)+" "+t._s(t.address.address))])]):o("div",{staticClass:"adress_detail"},[o("span",[t._v("您还没有填写收货信息，马上去填写。")])]),t._v(" "),o("img",{staticClass:"right_go",attrs:{src:i(162)}}),t._v(" "),o("div",{staticStyle:{clear:"both"}})]),t._v(" "),o("div",{staticClass:"product_detail"},[o("div",{staticClass:"product_detail_header"}),t._v(" "),o("div",{staticClass:"product_content",domProps:{innerHTML:t._s(t.goods.description)}})])]),t._v(" "),t.goods.stock&&t.goods.stock>0?o("div",{staticClass:"btn_bottom  ",on:{click:function(e){t.change()}}},[o("div",{staticClass:"btn_change"},[t._v("立即兑换")])]):t.showLoad?t._e():o("div",{staticClass:"btn_bottom  overed "},[o("div",{staticClass:"btn_change "},[t._v("已兑完")])]),t._v(" "),o("div",{staticStyle:{display:"none"},attrs:{id:"check_change"}},[t.check?o("div",{staticClass:"check_change up"},[o("div",{staticClass:"close"}),t._v(" "),t.goods.home_pic?o("div",{staticClass:"img"},[o("img",{attrs:{src:t.goods.home_pic.path,alt:""}})]):t._e(),t._v(" "),o("div",{staticClass:"coin"},[o("span",[t._v(t._s(t.goods.coinNum))])]),t._v(" "),o("div",{staticClass:"clear"}),t._v(" "),o("div",{staticClass:"line"}),t._v(" "),o("div",{staticClass:"btn_change check_change_btn"},[t._v("确认兑换")])]):t._e()])],1)},staticRenderFns:[]}},563:function(t,e,i){var o=i(292);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("350279f7",o,!0)},91:function(t,e,i){i(563);var o=i(1)(i(232),i(495),null,null);t.exports=o.exports}});
//# sourceMappingURL=22.build.js.map?5c7fdce1