webpackJsonp([46],{136:function(t,e,i){i(568);var o=i(1)(i(279),i(500),null,null);t.exports=o.exports},205:function(t,e,i){t.exports=i.p+"signbg.jpg"},279:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={data:function(){return{isMe:!1,lastMessageId:0,list:[],timer:null,isgeting:!1,user:{}}},mounted:function(){var t=this;t.getUserInfo(),t.getMessage(8),setInterval(function(){t.getMessage(2)},500),xqzs.mood.actionSheetEdit("取消","发送",function(){var e=$(".comment_text").val(),i={message:e};$("#textarea").val("").attr({style:""}),$(".action-sheet-edit .release").css({borderColor:"#91cc91",background:"#94db93"}),t.$http.post(web.API_PATH+"xianchang/post/message/"+t.$route.query.xcId+"/_userId_",i).then(function(t){1==t.body.status&&t.body.data})},function(){},"上墙",!1,!0),$(".action-sheet-edit .weui-mask").hide()},methods:{emj:function(t){return xqzs.face.parseEmoji(t)},getUserInfo:function getUserInfo(){var _this=this;_this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/_userId_"}).then(function(data){null!==data.data.data&&(_this.user=eval(data.data.data))},function(t){})},getMessage:function(t){var e=this,i=this.$route.query.xcId;e.isgeting||(e.isgeting=!0,e.$http.get(web.API_PATH+"xianchang/get/message/"+i+"/"+t+"?last_messageId="+e.lastMessageId).then(function(i){e.list=e.list.concat(i.data.data);var o=0;e.list.length>0&&(o=e.list[e.list.length-1].messageId),e.lastMessageId=o,e.isgeting=!1,console.log(i.data.data.length),8==t?e.$nextTick(function(){var t=document.getElementById("signRoom_box");t.scrollTop=t.scrollHeight}):i.data.data.length>0&&$(".signRoom_box").animate({scrollTop:$(".signRoom_box")[0].scrollHeight},1e3*i.data.data.length)}))}},updated:function(){this.$nextTick(function(){$(".signRoom_box .item_box .me_item .main p").each(function(){$(this).height()>30?$(this).css("text-align","left"):$(this).css("text-align","right")})})},components:{}}},297:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".signRoom_box{background:url("+i(205)+") no-repeat;background-size:100% 100%;overflow:auto}.signRoom_box .item_box{padding:1.5rem .88235rem;padding-bottom:120px}.signRoom_box .item_box .item{min-height:2.35rem;background:hsla(0,0%,100%,.4);border-radius:.1471rem;padding:.588235rem;margin-bottom:.88235rem}.signRoom_box .item_box .item img{width:2.235rem;height:2.235rem;border:1px solid #fff;float:left}.signRoom_box .item_box .me_item img{float:right}.signRoom_box .item_box .main{padding-left:3rem;color:#fff}.signRoom_box .item_box .me_item .main{padding-right:3rem;padding-left:0}.signRoom_box .item_box .main span{font-size:.70588235rem;line-height:1.1rem;display:block}.signRoom_box .item_box .me_item .main span{text-align:right}.signRoom_box .item_box .me_item .main p{text-align:right;word-break:break-all;word-wrap:break-word}.signRoom_box .item_box .main p{font-size:.88235rem;line-height:1.411764rem}",""])},500:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signRoom_box",attrs:{id:"signRoom_box"}},[i("div",{directives:[{name:"title",rawName:"v-title"}]},[t._v("消息上墙")]),t._v(" "),i("ul",{staticClass:"item_box",attrs:{id:"item_box"}},t._l(t.list,function(e){return i("li",{staticClass:"item",class:{me_item:e.userId==t.user.id}},[i("img",{attrs:{src:e.faceUrl,alt:""}}),t._v(" "),i("div",{staticClass:"main"},[i("span",[t._v(t._s(e.nickName))]),t._v(" "),i("p",[t._v(t._s(t.emj(e.message)))])]),t._v(" "),i("div",{staticStyle:{clear:"both"}})])}))])},staticRenderFns:[]}},568:function(t,e,i){var o=i(297);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i(2)("5ed7fe9a",o,!0)}});
//# sourceMappingURL=46.build.js.map?5c7fdce1