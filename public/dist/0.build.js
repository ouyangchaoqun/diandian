webpackJsonp([0],{100:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__chart_vue__=__webpack_require__(73),__WEBPACK_IMPORTED_MODULE_0__chart_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__chart_vue__),__WEBPACK_IMPORTED_MODULE_1__banner_vue__=__webpack_require__(72),__WEBPACK_IMPORTED_MODULE_1__banner_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__banner_vue__),__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue__=__webpack_require__(85),__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue__),myIndex={template:"#myIndex"};__webpack_exports__.default={data:function(){return{user:{},counter:1,num:10,pageStart:0,pageEnd:0,listdata:[],downdata:[],currTime:xqzs.dateTime.getTimeStamp(),topImg:xqzs.mood.getTopImg(),chartData:[{days:["1月1","2","3","4","5","6","7"],moods:[3,5,9,6,4,3,5]},{days:["1月8","9","10","11","12","13","14"],moods:[1,3,7,6,4,2,6]},{days:["1月15","16","17","18","19","20","21"],moods:[7,8,9,0,4,0,5]},{days:["1月22","23","24","25","26","27","28"],moods:[5,1,2,3,4,5,6]}]}},methods:{commentOrDel:function(t,e,o,i){var a=this;t===a.user.id?a._delComment(e,o,i):a.addComment(e,o,i)},_delComment:function(t,e,o){var i=this;xqzs.weui.actionSheet("删除我的评论?","删除",function(){var a=web.API_PATH+"mood/reply/[userId]/"+t;i.$http.delete(a).then(function(t){1===t.data.status?(i.downdata[e].commentList[o].isDel=!0,i.$set(i.downdata,e,i.downdata[e])):xqzs.weui.toast("fail","删除失败",function(){})}).catch(function(t){})},function(){})},addComment:function(t,e,o){var i=this;xqzs.mood.actionSheetEdit("取消","发送",function(o){i.$http.put(web.API_PATH+"mood/reply/add",{moodId:i.downdata[e].id,userId:null,replyId:t,content:o}).then(function(t){1===t.data.status&&(xqzs.weui.toast("success","提交成功",function(){}),i.downdata[e].commentList.push(t.data.data.reply),i.$set(i.downdata,e,i.downdata[e]),console.log(t.data.data.reply))},function(t){}),console.log(o)},function(t){console.log(t)},"回复 "+i.downdata[e].commentList[o].from_nickName)},showComment:function(t,e){var o=this;o.downdata[e].isShowComment?(o.downdata[e].isShowComment=!1,o.$set(o.downdata,e,o.downdata[e])):(!0!==o.downdata[e].isAsk&&o.$http.get(web.API_PATH+"mood/care/query/comment/"+t).then(function(t){o.downdata[e].isAsk=!0,1===t.data.status&&(t.data.data.care.length>0||t.data.data.reply.length>0)&&(o.downdata[e].hasComments=!0,o.downdata[e].careList=t.data.data.care,o.downdata[e].commentList=t.data.data.reply,o.downdata[e].isShowComment=!0),console.log(t.data.data),o.$set(o.downdata,e,o.downdata[e])},function(t){console.log("error")}),o.downdata[e].isShowComment=!0,o.$set(o.downdata,e,o.downdata[e]))},empty:function(t,e){var o=this;xqzs.weui.dialog("","确定删除吗？",function(){},function(){o._empty(t,e)})},_empty:function(t,e){var o=this,i=web.API_PATH+"mood/clean/content/[userId]/"+t;o.$http.delete(i).then(function(t){1===t.data.status?(o.downdata[e].content="",o.$set(o.downdata,e,o.downdata[e])):xqzs.weui.toast("fail","删除失败",function(){})}).catch(function(t){})},revoke:function(t,e){var o=this;xqzs.weui.dialog("","确定撤回吗？",function(){},function(){o._revoke(t,e)})},_revoke:function(t,e){var o=this,i=web.API_PATH+"mood/[userId]/"+t;o.$http.delete(i,{emulateJSON:!0}).then(function(t){1===t.data.status?(o.downdata[e].hide=!0,o.$set(o.downdata,e,o.downdata[e]),xqzs.weui.toast("success","撤回成功",function(){})):xqzs.weui.toast("fail","撤回失败",function(){}),console.log(t)}).catch(function(t){})},showBigImg:function(t,e){for(var o=e.bigUrl,i=[],a=0;a<t.length;a++)i.push(t[a].bigUrl);wx.previewImage({current:o,urls:i})},getList:function(){var t=this;t.$http.get(web.API_PATH+"mood/query/user/page/[userId]/1/"+t.num).then(function(e){t.downdata=e.data.data.rows,t.downdata=xqzs.mood.initMoodsData(t.downdata),console.log(t.downdata),t.$nextTick(function(){myResizePicture()})},function(t){console.log("error")})},onRefresh:function(t){this.getList(),t()},onInfinite:function(t){var e=this,o=this;o.$http.get(web.API_PATH+"mood/query/user/page/[userId]/"+(o.counter+1)+"/"+o.num).then(function(i){o.counter++,o.pageEnd=o.num*o.counter,o.pageStart=o.pageEnd-o.num;var a=i.data.data.rows,s=0;o.pageEnd;for(a=xqzs.mood.initMoodsData(a);s<a.length;s++)o.downdata.push(a[s]);if(o.$nextTick(function(){myResizePicture()}),0===a.length)return e.$el.querySelector(".load-more").style.display="none",void(e.$el.querySelector(".load-finish").style.display="block");t()},function(t){console.log("error")})}},mounted:function mounted(){var _this=this;this.getList(),this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/[userId]"}).then(function(data){null!==data.data.data&&(_this.user=eval(data.data.data))},function(t){}),_this.$http.get(web.API_PATH+"mood/get/user/mood/week/[userId]").then(function(t){if(1===t.data.status){for(var e=0;e<t.data.data.length;e++){for(var o={days:[],moods:[]},i=0;i<t.data.data[e].length;i++)o.days.push(t.data.data[e][i].day),o.moods.push(t.data.data[e][i].value);_this.$set(_this.chartData,e,o)}console.log(_this.chartData)}}).catch(function(t){})},components:{"v-scroll":__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue___default.a,"v-chart":__WEBPACK_IMPORTED_MODULE_0__chart_vue___default.a,"v-banner":__WEBPACK_IMPORTED_MODULE_1__banner_vue___default.a}}},134:function(t,e,o){e=t.exports=o(1)(),e.push([t.i,".actionSheet_wrap .doAction{font-size:16px;color:red}.actionSheet_wrap .weui-actionsheet__title-text{color:#999;font-size:13px;height:40px}.show_box{width:100%;background:#f9f9f9;border-radius:5px;margin-top:15px;position:relative}.show_box .arraw{background:#f9f9f9;width:16px;height:16px;position:absolute;top:-4px;left:11px;transform:rotate(45deg)}.show_top{padding-left:30px;padding-top:7px;padding-bottom:4px;overflow:auto;position:relative}.show_top .show_img1{position:absolute;top:15px;left:9px;width:18px;height:auto;margin:0}.show_top img{width:33px;height:33px;float:left;margin-right:5px;margin-bottom:6px}.show_bottom{position:relative;padding-left:30px;padding-bottom:4px;overflow:auto;padding-right:12px;border-top:1px solid #eee}.show_img2{width:18px;position:absolute;top:15px;left:9px}.show_bottom li{position:relative;padding:5px 0 8px;border-bottom:1px solid #eee}.show_bottom li:last-child{border-bottom:none}.show_bottom_img{width:33px;height:33px;position:absolute;top:7px;left:0}.show_bottom_text{margin-left:45px}.show_bottom_text div,.show_bottom_text span{font-size:13px;color:#333}.show_bottom_text div{line-height:20px}.show_bottom_text .pname{color:#5e61a2;font-size:13px}.show_box .show_img1,.show_box .show_img2{width:14px}.btn_del{display:inline-block;margin-left:13px;color:#5e61a2;font-size:12px}.editMood{height:34px;line-height:34px;font-size:14px;color:#999;background:#dcdcdc;display:block;padding-left:10px;border-radius:5px;margin-bottom:10px;position:relative}.editMood img{position:absolute;top:7px;right:10px;width:20px}.userHeaderImg{position:absolute;left:50%;bottom:-32px;margin-left:-32px;background:hsla(0,0%,100%,.6);padding:2px}.userHeaderImg,.userHeaderImg img{height:64px;width:64px;border-radius:50%}.userHeaderImg img{margin:auto;display:block}.myMood_list{background:#fff;padding:16px 10px;margin-bottom:1px}.moodImg{width:40px;height:40px;display:block;float:left}.moodImg_right{margin-left:50px}.moodState{font-size:14px;margin-bottom:6px}.moodContext{font-size:14px;color:#333;line-height:20px;margin-bottom:10px}.moodPhotoLists{display:flex;height:auto;margin-right:20px;margin-bottom:15px}.moodPhotoList{float:left;margin-right:.3125rem;width:4.8675rem;height:4.8675rem;overflow:hidden;position:relative}.moodLoc{font-size:12px;color:#516591;margin-bottom:5px}.moodTime{font-size:12px;color:#787878;height:20px;line-height:20px}.moodFollow{float:right}.followCount,.followtype{float:left;margin-left:5px}.followtype{width:24px;margin-top:-2px}.moodImg_right .moodPhotoLists.two>div{width:7.5rem;height:6rem}.moodImg_right .moodPhotoLists.one>div{width:10.7rem;height:8.1rem}",""])},136:function(t,e,o){t.exports=o.p+"bianji.png?cbdeaa0d5f1a1fa38622fc013134745e"},186:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative"}},[i("v-scroll",{attrs:{"on-refresh":t.onRefresh,"on-infinite":t.onInfinite}},[i("div",{staticClass:"myIndex_box"},[i("div",{staticClass:"banner index_banner"},[i("v-banner"),t._v(" "),i("div",{staticClass:"userHeaderImg"},[i("img",{attrs:{src:t.user.faceUrl,alt:""}})])],1),t._v(" "),i("div",{staticClass:"chart_box"},[i("v-chart",{attrs:{chartData:t.chartData}})],1),t._v(" "),t._l(t.downdata,function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!item.hide"}],key:a,staticClass:"myMood_list"},[i("img",{staticClass:"moodImg",attrs:{src:e.moodValueUrl,alt:""}}),t._v(" "),i("div",{staticClass:"moodImg_right"},[i("div",{staticClass:"moodState",class:{unhappy_txt_color:e.moodValue<=4,happy_txt_color:e.moodValue>4}},[t._v("\n                        "+t._s(e.moodValueText)+"\n                    ")]),t._v(" "),t.currTime-e.addTime<=1200&&(""==e.content||null==e.content)?[i("router-link",{staticClass:"editMood",attrs:{to:e.editLink}},[t._v("\n                            20分钟内可以补充文字和图片\n                            "),i("img",{attrs:{src:o(136),alt:""}})])]:t._e(),t._v(" "),""!=e.content&&null!=e.content?[i("div",{staticClass:"moodContext"},[t._v(t._s(e.content))]),t._v(" "),e.haspicture?i("div",{staticClass:"moodPhotoLists"},t._l(e.pics,function(o){return i("div",{staticClass:"moodPhotoList"},[i("img",{style:o.styleObject,attrs:{src:o.smallUrl,"data-bigPic":o.bigUrl,"data-w":o.picwidth,"data-h":o.picheight},on:{click:function(i){t.showBigImg(e.pics,o)}}})])})):t._e()]:t._e(),t._v(" "),""!=e.content&&null!=e.content?i("div",{staticClass:"moodLoc"},[t._v(t._s(e.address))]):t._e(),t._v(" "),i("div",{staticClass:"moodTime"},[i("span",[t._v(t._s(e.outTime))]),t._v(" "),t.currTime-e.addTime<=180&&(""==e.content||null==e.content)?i("span",{staticClass:"btn_del",on:{click:function(o){t.revoke(e.id,a)}}},[t._v("撤回")]):t._e(),t._v(" "),""!=e.content&&null!=e.content?i("span",{staticClass:"btn_del",on:{click:function(o){t.empty(e.id,a)}}},[t._v("删除")]):t._e(),t._v(" "),i("div",{staticClass:"moodFollow",on:{click:function(o){t.showComment(e.id,a)}}},[i("span",{staticClass:"followCount"},[t._v(t._s(e.careCount))]),t._v(" "),i("img",{staticClass:"followtype",attrs:{src:e.careImg,alt:""}}),t._v(" "),null!==e.content&&""!==e.content?[i("span",{staticClass:"followCount"},[t._v(t._s(e.replycount))]),t._v(" "),i("img",{staticClass:"followtype",staticStyle:{width:"18px","margin-top":"3px"},attrs:{src:o(65),alt:""}})]:t._e()],2)])],2),t._v(" "),e.hasComments&&e.isShowComment?i("div",{staticClass:"show_box"},[i("div",{staticClass:"arraw"}),t._v(" "),i("div",{staticClass:"show_top"},[i("img",{staticClass:"show_img1",attrs:{src:o(61)}}),t._v(" "),t._l(e.careList,function(t){return i("img",{attrs:{src:t.faceUrl}})})],2),t._v(" "),i("ul",{staticClass:"show_bottom"},[i("img",{staticClass:"show_img2",attrs:{src:o(65)}}),t._v(" "),t._l(e.commentList,function(o,s){return o.isDel?t._e():i("li",{key:s,attrs:{"data-replyid":o.id,"data-moodid":e.id,"data-userid":o.fromuserid,"data-ajaxresult":"hasface"},on:{click:function(e){t.commentOrDel(o.fromuserid,o.id,a,s)}}},[i("img",{staticClass:"show_bottom_img",attrs:{src:o.from_faceUrl}}),t._v(" "),i("div",{staticClass:"show_bottom_text"},[i("div",{staticClass:"reply_author"},[i("a",{staticClass:"pname other",attrs:{href:"javascript:;"}},[t._v(t._s(o.from_nickName))])]),t._v(" "),i("div",{staticClass:"reply_content"},[o.tomoodreplyid>0?[i("span",{staticClass:"text_comment"},[t._v("回复")]),i("a",{staticClass:"pname other",attrs:{href:"javascript:;"}},[t._v(t._s(o.to_nickName)+"：")])]:t._e(),t._v(" "),i("span",{staticClass:"text_comment"},[t._v(t._s(o.content))])],2)])])})],2)]):t._e()])})],2)])],1)},staticRenderFns:[]}},209:function(t,e,o){var i=o(134);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(2)("53b9f6d5",i,!0)},49:function(t,e,o){o(209);var i=o(0)(o(100),o(186),null,null);t.exports=i.exports},61:function(t,e,o){t.exports=o.p+"list_dianz_pre.png?df38be38d88b71e2fc571c49aecb3e86"},65:function(t,e,o){t.exports=o.p+"comments.png?5464c99ee86d877c6beadcd2600f4fde"},66:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{topImg:xqzs.mood.getTopImg()}}}},67:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{}},props:["chartData"],watch:{chartData:function(t){var e=1.04*window.innerWidth,o=.2848*window.innerHeight;$(".odiv").width(e),$(".odiv").height(o),this.makeCharts(t,e,o),console.log("chartData:"+this.chartData)}},updated:function(){console.log("chartDataupdate"+this.chartData)},methods:{makeCharts:function(t,e,o){new Swiper(".swiper-container",{direction:"horizontal",loop:!1,initialSlide:3,mode:"horizontal",freeMode:!1,touchRatio:.5,longSwipesRatio:.1,threshold:50,followFinger:!1,observer:!0,observeParents:!0,onSlideChangeStart:function(i){var a=i.activeIndex,s={id:"d"+a,days:t[a].days,moods:t[a].moods,width:e,height:o};getChart(s);$("svg").css({"margin-left":"-18px"}),$("svg image").attr("x",18),$(".highcharts-xaxis-labels ").each(function(t){$(this).find("text").each(function(t){0==t&&$(this).attr("x",parseFloat($(this).attr("x"))+18)})}),$(".highcharts-xaxis-labels  text ").each(function(t){$(".highcharts-xaxis-labels  text ").length-1==t&&$(this).css("fill","#8cfff6")}),$(".odiv>div").each(function(){$(this).css({width:$(this).width()-18+"px","border-radius":"10px"})})}})}},mounted:function(){}}},68:function(t,e,o){e=t.exports=o(1)(),e.push([t.i,"body,div,html{margin:0;padding:0}.chart_box{height:190px;padding:40px 0 20px;background:#fff;margin-bottom:5px}.highcharts-series-group{margin-right:120px}.step{width:100%;overflow:hidden}.swiper-wrapper{-webkit-perspective:3000;-webkit-backface-visibility:hidden}.main-color .highcharts-graph{stroke:#fff}.main-color,.main-color .highcharts-point{fill:#f60}.highcharts-graph.highcharts-negative{stroke:#999}.highcharts-area.highcharts-negative,.highcharts-point.highcharts-negative{fill:#999}.bgs{background:url("+o(70)+");background-size:100% 100%;margin:0 10px;position:relative;border-radius:6px;height:190px}.bgs .title{position:absolute;top:3px;left:50%;margin-left:-24px;font-size:12px;color:#5cd9d1}",""])},69:function(t,e,o){e=t.exports=o(1)(),e.push([t.i,".banner{width:100%}.banner img{display:block;width:100%}.index_banner{position:relative}",""])},70:function(t,e,o){t.exports=o.p+"bj.png?198bda331801440bc50c59df49284f1b"},72:function(t,e,o){o(77);var i=o(0)(o(66),o(75),null,null);t.exports=i.exports},73:function(t,e,o){o(76);var i=o(0)(o(67),o(74),null,null);t.exports=i.exports},74:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"bgs"},[o("div",{staticClass:"title"},[t._v("心情指数")]),t._v(" "),o("div",{staticClass:"step"},[o("div",{staticClass:"swiper-container swiper-container-h"},[o("div",{staticClass:"swiper-wrapper"},[o("div",{staticClass:"swiper-slide"},[o("div",{staticClass:"odiv",attrs:{id:"d0"}})]),t._v(" "),o("div",{staticClass:"swiper-slide"},[o("div",{staticClass:"odiv",attrs:{id:"d1"}})]),t._v(" "),o("div",{staticClass:"swiper-slide"},[o("div",{staticClass:"odiv",attrs:{id:"d2"}})]),t._v(" "),o("div",{staticClass:"swiper-slide"},[o("div",{staticClass:"odiv",attrs:{id:"d3"}})])])])])])])}]}},75:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{attrs:{src:t.topImg}})},staticRenderFns:[]}},76:function(t,e,o){var i=o(68);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(2)("12f12071",i,!0)},77:function(t,e,o){var i=o(69);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(2)("d4b7634e",i,!0)},78:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{offset:{type:Number,default:40},enableInfinite:{type:Boolean,default:!0},enableRefresh:{type:Boolean,default:!0},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1}},data:function(){return{top:0,state:0,startY:0,touching:!1,infiniteLoading:!1,height:"height:100px"}},mounted:function(){this.height="height:"+document.body.clientHeight+"px"},methods:{touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startScroll=this.$el.scrollTop||0,this.touching=!0},touchMove:function(t){if(this.enableRefresh&&!(this.$el.scrollTop>0)&&this.touching){var e=t.targetTouches[0].pageY-this.startY-this.startScroll;e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)}},touchEnd:function(t){if(this.enableRefresh){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0)}},refresh:function(){this.state=2,this.top=this.offset,this.onRefresh(this.refreshDone)},refreshDone:function(){this.state=0,this.top=0},infinite:function(){this.infiniteLoading=!0,this.onInfinite(this.infiniteDone)},infiniteDone:function(){this.infiniteLoading=!1},onScroll:function(t){if(this.enableInfinite&&!this.infiniteLoading){var e=this.$el.clientHeight;this.$el.querySelector(".inner").clientHeight-e-this.$el.scrollTop-(this.onRefresh?this.$el.querySelector(".pull-refresh").clientHeight:0)<this.$el.querySelector(".load-more").clientHeight&&this.infinite()}}}}},79:function(t,e,o){e=t.exports=o(1)(),e.push([t.i,".yo-scroll{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;-webkit-overflow-scrolling:touch}.yo-scroll .inner{position:absolute;top:-2rem;width:100%;transition-duration:.3s}.yo-scroll .pull-refresh{position:relative;left:0;top:0;width:100%;height:2rem;display:flex;align-items:center;justify-content:center}.yo-scroll.touch .inner{transition-duration:0ms}.yo-scroll.down .down-tip,.yo-scroll.refresh .refresh-tip,.yo-scroll.up .up-tip{display:block}.yo-scroll .down-tip,.yo-scroll .refresh-tip,.yo-scroll .up-tip{display:none}.yo-scroll .load-more{height:3rem;display:flex;align-items:center;justify-content:center}.yo-scroll .load-finish{height:2rem;text-align:center}",""])},85:function(t,e,o){o(87);var i=o(0)(o(78),o(86),null,null);t.exports=i.exports},86:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"yo-scroll",class:{down:0===t.state,up:1==t.state,refresh:2===t.state,touch:t.touching},style:t.height,on:{touchstart:function(e){t.touchStart(e)},touchmove:function(e){t.touchMove(e)},touchend:function(e){t.touchEnd(e)},scroll:function(e){(t.onInfinite||t.infiniteLoading)&&t.onScroll(e)}}},[o("section",{staticClass:"inner",style:{transform:"translate3d(0, "+t.top+"px, 0)"}},[o("header",{staticClass:"pull-refresh"},[t._t("pull-refresh",[o("span",{staticClass:"down-tip"},[t._v("下拉更新")]),t._v(" "),o("span",{staticClass:"up-tip"},[t._v("松开更新")]),t._v(" "),o("span",{staticClass:"refresh-tip"},[t._v("更新中")])])],2),t._v(" "),t._t("default"),t._v(" "),o("footer",{staticClass:"load-more"},[t._t("load-more",[o("span",[t._v("下拉加载更多")])])],2),t._v(" "),o("footer",{staticClass:"load-finish",staticStyle:{display:"none"}},[t._t("load-finish",[o("span",[t._v("已经加载完成")])])],2)],2)])},staticRenderFns:[]}},87:function(t,e,o){var i=o(79);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(2)("18db66ab",i,!0)}});
//# sourceMappingURL=0.build.js.map