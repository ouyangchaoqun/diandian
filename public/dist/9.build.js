webpackJsonp([9],{146:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{}}}},147:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,"",""])},148:function(t,e,a){a(150);var i=a(1)(a(146),a(149),null,null);t.exports=i.exports},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"weui-mask_transparent"}),t._v(" "),a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),a("p",{staticClass:"weui-toast__content"},[t._v("数据加载中")])])])}]}},150:function(t,e,a){var i=a(147);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(2)("5de0c1c0",i,!0)},162:function(t,e,a){t.exports=a.p+"me_jt.png"},193:function(t,e,a){t.exports=a.p+"birthdayshare.png"},201:function(t,e,a){t.exports=a.p+"input_bg.png"},202:function(t,e,a){t.exports=a.p+"input_bottom.png"},203:function(t,e,a){t.exports=a.p+"input_top.png"},234:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(148),o=a.n(i);e.default={data:function(){return{showLoad:!1,birthday:"",year:"",month:"/",day:"/",nowYear:"",nowMonth:"",lastDay:"",hasBirthday:null,index:0,MIN_YEAR:1891,MAX_YEAR:2100,constellation:{data:[]},time:{year:2017,month:8},isShowShareTip:!1,theUserId:0,theUser:null,user:null,isLunar:0,lunarDateData:[],solarDateDate:[],isLeapMonth:!1,isNotGoOtherUrl:!1}},components:{"v-showLoad":o.a},mounted:function(){var t=this,e=new Date;t.nowYear=e.getFullYear(),t.nowMonth=e.getMonth()+1,t.lastDay=calendar.solarDays(t.nowYear,t.nowMonth),this.$route.query.userid?t.theUserId=this.$route.query.userid:t.theUserId="_userId_",this.lunarDateData=xqzs.dateTime.getLunarData(1949,2017),this.solarDateDate=xqzs.dateTime.getSolarData(1949,2017);var a="";web.guest&&(this.isGuest=!0,a="?guest=true");var i=t.$route.query.userid;console.log(i),t.showLoad=!0,t.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/"+i+a}).then(function(e){if(console.log(e),null!==e.data.data){if(t.theUser=e.data.data,t.birthday=t.theUser.birthday,t.birthday){var a=t.birthday.split(",");t.year=a[0],t.month=a[1],t.day=a[2],1!=t.theUser.isLunar&&2!=t.theUser.isLunar||(t.isLunar=!0,t.yearN=a[0]+"年",t.monthN=calendar.toChinaMonth(a[1]),2==t.theUser.isLunar&&(t.isLeapMonth=!0,t.monthN="闰"+t.monthN),t.dayN=calendar.toChinaDay(a[2]))}t.initBD()}},function(e){t.showLoad=!1}),t.$http.get(web.API_PATH+"user/get/qr/code/"+t.theUserId+a).then(function(t){console.log(t),$("#output").empty(),$("#output").qrcode({width:110,height:110,text:xqzs.string.toUtf8(t.data.data),background:"#ffffff",foreground:"#000"}),setTimeout(function(){var t=document.getElementsByTagName("canvas")[0];console.log(t);var e=xqzs.image.convertCanvasToImage(t);$(".ewm").html(""),$(".ewm").append(e)},1e3)},function(t){}),this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/_userId_"}).then(function(e){null!==e.data.data&&(t.user=e.data.data)},function(t){})},filters:{shortName:function(t,e){return xqzs.shortname(t,e)}},methods:{share:function(){this.isShowShareTip=!this.isShowShareTip},initBD:function(){var t=this;if(null!=t.theUser.birthday&&""!=t.theUser.birthday?t.hasBirthday=!0:t.hasBirthday=!1,t.birthday=t.theUser.birthday,t.birthday){var e=t.birthday.split(",");t.year=e[0],t.month=e[1],t.day=e[2]}if(t.theUser.isLunar){var a=t.birthday.split(","),i=calendar.lunar2solar(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),t.isLeapMonth);t.birthday=i.cYear+","+i.cMonth+","+i.cDay,t.year=i.cYear,t.month=i.cMonth,t.day=i.cDay}var o=new Date,n=o.getFullYear(),r=o.getMonth()+1;if(t.time={year:n,month:r},""==t.month||""==t.day||"/"==t.month||"/"==t.day)return void(t.showLoad=!1);var s=xqzs.constellation.array[xqzs.constellation.getIndex(t.month,t.day)],l="";web.guest&&(this.isGuest=!0,l="?guest=true"),this.$http({method:"GET",type:"json",url:web.API_PATH+"constellation/get/"+n+"/"+r+"/"+s.id+l}).then(function(e){if(t.showLoad=!1,console.log(e),1==e.data.status){s.data=e.data.data,t.constellation=s,t.isNotGoOtherUrl=!0;for(var a=0;a<s.data.length;a++)"跳转链接"==s.data[a].name&&""!=s.data[a].content&&s.data[a].content.indexOf("http")>=0&&(t.isNotGoOtherUrl=!1,window.location.replace(s.data[a].content));xqzs.wx.setConfig(this,function(){var e={imgUrl:web.BASE_PATH+t.constellation.pic,title:t.constellation.name+"本月运势",desc:t.constellation.name+"本月（"+t.nowMonth+".1-"+t.nowMonth+"."+t.lastDay+"）运势已新鲜出炉，快来围观吧~",link:web.BASE_PATH+"guest/#/constellationLuck?year="+t.nowYear+"&month="+t.nowMonth+"&userid="+t.theUserId};weshare.init(wx,e,function(){},function(){})}),t.$nextTick(function(){$(".onimg").each(function(){var e=$(this);t.changeImageColor("/dist/constellation/star1.png",e.attr("color"),function(t){e.attr("src",t)})})})}},function(e){t.showLoad=!1})},lutSelect:function(t){var e=this;if(0==t){if(!this.isLunar)return;if(this.birthday&&""!=this.birthday){var a=this.birthday.split(","),i=calendar.lunar2solar(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),e.isLeapMonth);this.birthday=i.cYear+","+i.cMonth+","+i.cDay,console.log(i),e.year=i.cYear,e.month=i.cMonth,e.day=i.cDay}this.isLunar=!1}else if(1==t){if(this.isLunar)return;if(this.isLunar=!0,this.birthday&&""!=this.birthday){var o=this.birthday.split(","),n=calendar.solar2lunar(o[0],o[1],o[2]);console.log(n),this.birthday=n.lYear+","+n.lMonth+","+n.lDay,e.isLeapMonth=n.isLeap,e.yearN=n.lYear+"年",e.monthN=n.IMonthCn,e.dayN=n.IDayCn,e.year=n.lYear,e.month=n.lMonth,e.day=n.lDay,n.isLeap&&(e.month=n.lMonth+"_1")}}},showDate:function(){var t=this,e=[1988,1,1];if(t.hasBirthday){var a=t.birthday.split(",");e=[a[0],a[1],a[2]]}console.log(this.lunarDateData),this.isLunar?weui.picker(this.lunarDateData,{depth:3,defaultValue:e,id:"id"+Math.random(),onChange:function(t){console.log(t)},onConfirm:function(e){t.yearN=e[0].label,t.monthN=e[1].label,t.dayN=e[2].label,console.log(t.monthN);var a=e[1].value;"string"==typeof a&&a.indexOf("_")?(t.isLeapMonth=!0,a=e[1].value.split("_")[0]):t.isLeapMonth=!1,t.year=e[0].value,t.month=e[1].value,t.day=e[2].value,t.birthday=e[0].value+","+a+","+e[2].value}}):weui.picker(this.solarDateDate,{depth:3,defaultValue:e,id:"id"+Math.random(),onChange:function(t){console.log(t)},onConfirm:function(e){t.year=e[0].value,t.month=e[1].value,t.day=e[2].value,t.birthday=e[0].value+","+e[1].value+","+e[2].value}})},lookLuck:function(){var t=this;$(".realName").val();if(""==t.birthday||null==t.birthday)return void xqzs.weui.toast("fail","请填写生日");var e={id:t.user.id,birthday:t.birthday,isLunar:t.isLunar?t.isLeapMonth?2:1:0};console.log(e),t.$http.post(web.API_PATH+"user/update",e).then(function(e){console.log(t.birthday),t.theUser.birthday=t.birthday,t.theUser.isLunar=t.isLunar,t.initBD()})},changeImageColor:function(t,e,a){var i=new Image;i.src=t,e=e||"#727272";var o=parseInt("0x"+e.substr(1,2)),n=parseInt("0x"+e.substr(3,2)),r=parseInt("0x"+e.substr(5,2));i.onload=function(){var t=i.width,e=i.height,s=document.createElement("canvas"),l=s.getContext("2d");s.width=t,s.height=e,l.drawImage(i,0,0,t,e);for(var d=l.getImageData(0,0,t,e),c=0;c<d.data.length;){var h=(d.data[c++],d.data[c++],d.data[c++],d.data[c++]);d.data[c-4]=o,d.data[c-3]=n,d.data[c-2]=r,d.data[c-1]=h}l.putImageData(d,0,0);var u=s.toDataURL("png");a&&a(u)}}}}},307:function(t,e,a){e=t.exports=a(0)(),e.push([t.i,".addTitle_top{color:#fff;font-size:14px}.addTime{font-size:12px}.form_birthday{height:100%;width:100%;background:url("+a(474)+") no-repeat;position:relative}.Bstart{width:4.76rem;height:5.18rem;display:block;top:2rem;margin-left:-2.38rem}.Bstart,.form_input{position:absolute;left:50%}.form_input{background:#fff;height:18.32rem;width:17.65rem;border-radius:5px;top:8.9rem;padding-top:2.18rem;margin-left:-8.825rem}.input_tab{display:flex;width:6.8rem;height:1.588rem;margin:0 auto;font-size:14px;line-height:1.588rem;overflow:hidden;border-radius:5px;border:1px solid #a8a8a8;margin-bottom:2rem}.input_tab li{flex-grow:1;text-align:center;color:#999}.input_tab .input_tabActive{background:#795fb0;color:#fff;border-color:#795fb0}.title_header{font-size:15px;text-align:center;color:#fff}.addEwmBox{background:#fff;height:9.83rem;width:100%;padding-top:1.47rem;padding-bottom:1.47rem;position:relative}.addEwmBox img{display:block;margin:0 auto;width:90%}.addEwmtext{font-size:11px;color:#4e1f6a;text-align:center;margin:0 auto;top:.6rem;margin-left:-100px;width:200px}.addEwmtext,.addTitleBox{position:absolute;left:50%}.addTitleBox{top:.88rem;margin-left:-112px;width:290px}.addInfo{color:#fff;float:left;margin-left:12px;margin-top:1.4rem}.addMainbg{background:url("+a(472)+") no-repeat;background-size:cover;position:relative;overflow:hidden}.startMoveBg{position:absolute;top:0;left:100%;height:100%;transform:rotate(-10deg);-webkit-transform:rotate(-10deg);animation:startMove 1.5s linear 5s infinite;-webkit-animation:startMove 1.5s linear 5s infinite}@keyframes startMove{0%{left:80%;top:-30%}to{left:-80%;top:30%}}.img.smill img{width:10rem;height:10rem;margin:0 auto}.dialog_follow .img.smill{background:#01af00;text-align:center;height:10rem}.ewm{position:absolute;left:50%;margin-left:-55px;top:4rem}.ewm .output,.myshare{width:100%;height:100%}.myshare{background:url("+a(193)+") no-repeat top rgba(0,0,0,.9);background-position:2.5rem 3.5rem;background-size:80%;position:fixed;top:0;left:0;z-index:10001}.goInfo{background:#0bb20c;color:#fff;text-align:center;padding:4px 12px;width:60%;display:block;margin:12px auto;font-size:.8823529411764706rem;margin-bottom:26px;border-radius:8px}.dialog_follow{width:66%;background:#fff;border-radius:10px;overflow:hidden;height:20.47058823529412rem;position:absolute;top:50%;margin-top:-10.23529411764706rem;left:17%;z-index:10001}.dialog_follow img{width:100%}.dialog_follow .img{height:11rem;overflow:hidden}.dialog_follow .text{text-align:center;font-size:.823529411764706rem;line-height:1.5}.xs_pic{position:relative;height:3.94rem;width:3.94rem;border-radius:50%;border:1.5px solid #bc75f9;overflow:hidden;background:#fff;float:left;margin-top:1rem}.xs_pic img{width:2rem;height:2.2rem;display:block;position:absolute;top:50%;margin-top:-1rem;left:50%;margin-left:-1rem}.luck{font-size:.8823529rem;color:#333;position:relative;background:#eee}.luck .title{background:url("+a(473)+") no-repeat;background-size:100% 100%;height:4.23rem;width:100%;margin:0 auto;position:relative;padding-top:4.65rem}.luck .info{font-size:1.1rem}.luck .info span{font-size:17px;font-weight:700}.luck .main_txt{line-height:1;font-size:.88rem;font-style:normal}.luck .main_txt span{margin:1px;background:#b49781;border-radius:4px;display:block;height:1.67647rem;line-height:1.67647rem;color:#fff;padding:0 .617647rem}.luck .main_content{line-height:1.6;background-size:100%;border-bottom:1px solid hsla(0,0%,93%,.2)}.luck .main_content .br{display:block;margin-bottom:10px}.luck .bottom_info{font-size:.76470588rem;margin:2.3rem 15px 1.1rem}.luck .input_box{height:9.52941181rem;width:17.6470588rem;position:relative;margin:0 auto;margin-top:2.66176470585rem;background:url("+a(201)+");background-size:100%;padding-top:1.7941176rem}.luck .input_box:before{top:0;background:url("+a(203)+') no-repeat;background-size:100%}.luck .input_box:after,.luck .input_box:before{content:" ";display:block;position:absolute;left:0;height:.9117647rem;width:100%}.luck .input_box:after{bottom:0;background:url('+a(202)+") no-repeat #fffcf9 bottom;background-size:100%}.luck .btn_action{height:2.35rem;line-height:2.35rem;border-radius:1.1rem;background:#795fb0;text-align:center;color:#fff;font-size:.94rem;width:15rem;margin:0 auto}.luck .input_top{text-align:center;color:#999;width:100%;line-height:1rem;font-size:13px;margin-bottom:2.7rem}.luck .inputItem{width:15rem;margin:0 auto;height:2.588rem;background:rgba(121,95,176,.1);line-height:2.588rem;border-radius:5px;margin-bottom:3.8rem}.luck .inputItem .left{float:left;margin-left:1.176rem}.luck .inputItem .right{float:left}.luck .inputItem .realName{background:none;font-size:1rem;width:100%}.luck .inputItem,.xz{position:relative}.xz{height:3rem}.xz div{float:left}.luck .down{width:16px;background:url("+a(162)+");height:16px;transform:rotate(90deg);background-size:100%;position:absolute;right:.4rem;top:.9rem}.xz_pic{width:1.56rem;height:1.56rem;margin-left:1.18rem;margin-top:.85rem}.xz_pic img{width:100%;height:100%}.xz_ys{margin-left:.82rem;color:#fff}.xz_ys,.xz_zs{font-size:.88rem;margin-top:1.147rem;line-height:1}.xz_zs{margin-left:.88rem}.xz_zs img{width:.88rem;height:.94rem;margin-right:2px}.xz_content{padding:.4rem 1.18rem 1.3rem;color:#fff;font-size:.88rem}.xz_introduce{padding:1.7rem 1.18rem 1.88rem;font-size:.71rem;color:#fff}",""])},357:function(t,e,a){t.exports=a.p+"star0.png"},358:function(t,e,a){t.exports=a.p+"star1.png"},364:function(t,e,a){t.exports=a.p+"Bstart.png"},368:function(t,e,a){t.exports=a.p+"addEwm_top.png"},472:function(t,e,a){t.exports=a.p+"startBg.png"},473:function(t,e,a){t.exports=a.p+"startHeader.jpg"},474:function(t,e,a){t.exports=a.p+"startLogin.jpg"},475:function(t,e,a){t.exports=a.p+"startMove.png"},510:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"luck"},[t.showLoad?i("v-showLoad"):t._e(),t._v(" "),i("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"hide_title"},[t._v("星座运势")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasBirthday&&t.isNotGoOtherUrl,expression:"hasBirthday&&isNotGoOtherUrl"}]},[i("div",{staticClass:"title"},[i("div",{staticClass:"addTitleBox"},[i("div",{staticClass:"xs_pic"},[i("img",{attrs:{src:t.constellation.pic}})]),t._v(" "),i("div",{staticClass:"addInfo"},[i("div",{staticClass:"info"},[t._v(t._s(t.constellation.name)),i("i",{staticClass:"main_txt"},[t._v("（"+t._s(t.constellation.times)+"）")])]),t._v(" "),i("div",{staticClass:"info"},[t._v("本月运势"),i("i",{staticClass:"main_txt"},[t._v("（"+t._s(t.nowMonth)+".1-"+t._s(t.nowMonth)+"."+t._s(t.lastDay)+"）")])])])])]),t._v(" "),i("div",{staticClass:"addMainbg"},[i("img",{staticClass:"startMoveBg",attrs:{src:a(475),alt:""}}),t._v(" "),t._l(t.constellation.data,function(e){return i("div",{staticClass:"main_content"},[i("div",[i("div",{staticClass:"xz"},[i("div",{staticClass:"xz_pic"},[i("img",{attrs:{src:e.pic}})]),t._v(" "),i("div",{staticClass:"xz_ys"},[t._v(t._s(e.name))]),t._v(" "),""!=e.color&&null!=e.color?i("div",{staticClass:"xz_zs"},[t._l(e.index,function(t){return i("img",{staticClass:"onimg",attrs:{src:a(358),color:e.color}})}),t._l(5-e.index,function(t){return i("img",{attrs:{src:a(357)}})})],2):t._e()]),t._v(" "),i("div",{staticClass:"xz_content"},[t._v(t._s(e.content))])])])}),t._v(" "),i("div",{staticClass:"xz_introduce"},[t._v("说明：广泛的星座运势并不会具体针对关联到个人运势，仅供娱乐参考")])],2),t._v(" "),!t.user||t.user&&t.theUser&&t.user.id!=t.theUser.id?i("div",{staticClass:"addEwmBox"},[i("img",{attrs:{src:a(368),alt:""}}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"ewm"}),i("br"),t._v(" "),i("br")]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowShareTip,expression:"isShowShareTip"}],staticClass:"myshare",on:{click:function(e){t.share()}}}),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"follow2"}},[i("div",{staticClass:"dialog_follow"},[t.theUser?i("div",{staticClass:"img"},[i("img",{attrs:{src:t.theUser.faceUrl}})]):t._e(),t._v(" "),i("div",{staticClass:"ewm"}),t._v(" "),t.theUser?i("div",{staticClass:"text"},[t._v("\n                    长按关注“"+t._s(t.theUser.nickName)+"”"),i("br"),t._v("记录你的心情\n                ")]):t._e()])]),t._v(" "),i("div",{staticClass:"output",staticStyle:{display:"none"},attrs:{id:"output"}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.hasBirthday,expression:"hasBirthday===false"}],staticClass:"form_birthday"},[i("img",{staticClass:"Bstart",attrs:{src:a(364),alt:""}}),t._v(" "),i("div",{staticClass:"form_input"},[i("div",{staticClass:"input_top"},[t._v("输入出生年月，立即测算本月运程")]),t._v(" "),i("ul",{staticClass:"input_tab"},[i("li",{class:{input_tabActive:!t.isLunar},on:{click:function(e){e.stopPropagation(),t.lutSelect(0)}}},[t._v("阳历")]),t._v(" "),i("li",{class:{input_tabActive:t.isLunar},on:{click:function(e){e.stopPropagation(),t.lutSelect(1)}}},[t._v("阴历")])]),t._v(" "),t.isLunar?i("div",{staticClass:"inputItem",on:{click:function(e){t.showDate()}}},[i("div",{staticClass:"left"},[t._v("出生年月：")]),t._v(" "),""!=t.birthday?i("div",{staticClass:"showdL right"},[t._v("\n                    "+t._s(t.yearN)+t._s(t.monthN)+t._s(t.dayN)+"\n                ")]):t._e(),t._v(" "),""==t.birthday?i("div",{staticClass:"showdL right"},[t._v("\n                    年/月/日\n                ")]):t._e()]):t._e(),t._v(" "),t.isLunar?t._e():i("div",{staticClass:"inputItem",on:{click:function(e){t.showDate()}}},[i("div",{staticClass:"left"},[t._v("出生年月：")]),t._v(" "),i("div",{staticClass:"showdL right"},[t._v("\n                    "+t._s(t.year)+"年"+t._s(t.month)+"月"+t._s(t.day)+"日\n                ")])]),t._v(" "),i("div",{staticClass:"btn_action",on:{click:function(e){t.lookLuck()}}},[t._v("查看星座运势")])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addEwmtext"},[t._v("长按二维码关注“好一点”后,"),a("br"),t._v("回复“星座运势”查看本月运势")])}]}},578:function(t,e,a){var i=a(307);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(2)("79bc1fb3",i,!0)},93:function(t,e,a){a(578);var i=a(1)(a(234),a(510),null,null);t.exports=i.exports}});
//# sourceMappingURL=9.build.js.map?5c7fdce1