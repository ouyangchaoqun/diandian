webpackJsonp([18],{165:function(t,e,o){t.exports=o.p+"propagandaJt.png"},200:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{moodCount:"",unhappyDays:"",happyDays:"",happyProportion:"",unhappyProportion:"",followScenes:"",happyScenes:"",unHappyScenes:"",happyThan:"",followScenesDays:"",followText:"",happyText:"",unhappyText:"",countYear:"",countMonth:"",nextMonth:"",oldMonth:"",moodValue:"",lastMonthMoodValue:"",theUserId:0,theUser:null,user:null,moodDifference:!1}},mounted:function(){var t=new Date,e=this.$route.query.year||t.getFullYear(),o=this.$route.query.month||t.getMonth();this.countMonth=o,this.countYear=e,12==this.countMonth?this.nextMonth=1:this.nextMonth=parseInt(this.countMonth)+1,1==this.countMonth?this.oldMonth=12:this.oldMonth=parseInt(this.countMonth)-1;var i=this;this.$route.query.userid?i.theUserId=this.$route.query.userid:i.theUserId="_userId_";var n="";web.guest&&(this.isGuest=!0,n="?guest=true");var s=i.$route.query.userid;i.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/"+s+n}).then(function(t){null!==t.data.data&&(i.theUser=t.data.data,xqzs.wx.setConfig(this,function(){wx.showAllNonBaseMenuItem();var t={imgUrl:i.theUser.faceUrl,title:"我的"+i.countMonth+"月很开心，你呢？",desc:"日子有大有小，心情冷暖共知；加入我们，一起记录美好时光。",link:web.BASE_PATH+"guest/#/moodCountPage?year="+i.countYear+"&month="+i.countMonth+"&userid="+i.theUserId};weshare.init(wx,t,function(){},function(){},"title")}))},function(t){}),i.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/_userId_"+n}).then(function(t){null!==t.data.data&&(i.user=t.data.data)},function(t){});var a=$(window).width();$(window).height();console.log(a),$(".swiper-slide").css({width:a});new Swiper(".swarppp",{direction:"vertical",onSlideChangeStart:function(t){var e=t.activeIndex;1==e&&i.setround(),2==e?$(".propagandaJt").hide():$(".propagandaJt").show()}});i.$http.get(web.API_PATH+"user/get/qr/code/"+i.theUserId+n).then(function(t){$("#output").empty(),$("#output").qrcode({width:100,height:100,text:xqzs.string.toUtf8(t.body.data),background:"#ffffff",foreground:"red"})},function(t){})},methods:{follow:function(){xqzs.weui.dialogCustom($("#follow2").html());var t=document.getElementsByTagName("canvas")[0];console.log(t);var e=xqzs.image.convertCanvasToImage(t);$(".ewm").html(""),$(".ewm").append(e)},setround:function(){var t=this,e="";web.guest&&(this.isGuest=!0,e="?guest=true"),this.$http.get(web.API_PATH+"mood/get/user/month/statistics/"+t.theUserId+"/"+t.countYear+"/"+t.countMonth+e).then(function(t){console.log(t.data);var e=t.data.data;if(1==t.data.status){if(this.moodCount=e.moodCount,this.happyDays=e.happyDays,this.unhappyDays=e.unhappyDays,0==e.moodCount)return this.setPie(1,1),this.unhappyProportion="50%",void(this.happyProportion="50%");this.unhappyProportion=Math.round(this.unhappyDays/this.moodCount*100)+"%",this.happyProportion=Math.round(this.happyDays/this.moodCount*100)+"%",this.followScenes=xqzs.mood.getCjImg(e.followScenes).src,this.happyScenes=xqzs.mood.getCjImg(e.happyScenes).src,this.unHappyScenes=xqzs.mood.getCjImg(e.unHappyScenes).src,this.followText=xqzs.mood.getCjImg(e.followScenes).text.substring(0,4),this.happyText=xqzs.mood.getCjImg(e.happyScenes).text.substring(0,4),this.unhappyText=xqzs.mood.getCjImg(e.unHappyScenes).text.substring(0,4),this.followScenesDays=e.followScenesDays,this.happyThan=Math.round(100*e.happyThan),this.moodvalue=e.moodValue,this.lastMonthMoodValue=e.lastMonthMoodValue,this.moodvalue>=this.lastMonthMoodValue?this.moodDifference=!0:this.moodDifference=!1,this.setPie(this.happyDays,this.unhappyDays)}})},record:function(){this.$router.push("/record")},goMonthAll:function(){this.$router.push("/myCenter/myIndex?month="+this.countMonth+"&activeIndex=1")},setPie:function(t,e){var o=null,i=this;$("#setPie").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{floating:!0,text:"共"+i.moodCount+"天",style:{color:"#fff",fontSize:"1.05rem"}},credits:{enabled:!1},tooltip:{enabled:!1},plotOptions:{pie:{allowPointSelect:!1,cursor:"pointer",dataLabels:{distance:20,enabled:!1,softConnector:!0,format:"{point.y}天{point.name} ",style:{color:"black"}},point:{}}},series:[{type:"pie",size:"60%",innerSize:"48%",name:"心情指数",colors:["#fe6103","#0eb80e"],data:[{name:"开心",y:t},{name:"不开心",y:e}]}]},function(t){var e=t.series[0].center[1],i=parseInt(t.title.styles.fontSize);t.setTitle({y:e+i/2}),o=t}),console.log($(".highcharts-background").attr("fill")),$(".highcharts-background").attr("fill","none")}}}},253:function(t,e,o){e=t.exports=o(0)(),e.push([t.i,".toping{background:url("+o(370)+") no-repeat;background-size:15.5rem;width:15.5rem;height:8rem;margin-left:-7.75rem;top:10%}.face_bg,.toping{position:absolute;left:50%}.face_bg{background:url("+o(312)+");background-size:11.79411764705882rem;width:11.79411764705882rem;height:11.79411764705882rem;margin-left:-5.897058823529412rem;top:40%}.face_bg img{width:56%;height:56%;margin:22%;border-radius:50%}.name_box_bottom{text-align:center;position:absolute;bottom:13%;left:0;width:100%}.name_box_bottom span{font-size:.8823529411764706rem;height:32px;line-height:32px;border:1px solid #fff;text-align:center;display:inline-block;padding:0 30px;color:#fff}.name_box_bottom2 span{border-radius:16px}.bggggg,.swiper-slide{position:relative}.bggggg{background:url("+o(330)+') no-repeat;background-size:100% 100%}.bggggg:before{content:" ";display:block;height:100%;width:100%;background:rgba(0,0,0,.2);position:absolute}.dialog_follow{width:66%;background:#fff;border-radius:10px;overflow:hidden;height:20.47058823529412rem;position:absolute;top:50%;margin-top:-10.23529411764706rem;left:17%;z-index:10001}.dialog_follow img{width:100%}.dialog_follow .img{height:11rem;overflow:hidden}.dialog_follow .text{text-align:center;font-size:.823529411764706rem;line-height:1.5}.img.smill img{width:10rem;height:10rem;margin:0 auto}.dialog_follow .img.smill{background:#01af00;text-align:center;height:10rem}.ewm{width:4.329411764705882rem;height:4.329411764705882rem;border:1px solid #ffcdcd;margin:.8rem auto;margin-bottom:.65rem;padding:2px}.ewm .output{width:100%;height:100%}.propagandaJt{position:absolute;left:50%;z-index:99;width:30px;margin-left:-15px;animation:jt_top 1s linear infinite}@keyframes jt_top{0%{bottom:20px}to{bottom:40px}}.setPieBox{margin-top:26%}.boxboxbox{overflow:hidden;margin:0 auto;background:url('+o(302)+") no-repeat;background-size:13.95238095238095rem;width:13.95238095238095rem;height:4.547619047619048rem;display:flex;padding-top:.417647058823529rem;display:-webkit-box;display:-webkit-flex;margin-top:1%}.boxboxbox div{flex:1;text-align:center;line-height:1.764705882352941rem}.boxboxbox div h4{font-size:13px;font-weight:400;color:hsla(0,0%,100%,.8)}.boxboxbox div span{font-size:13px;font-weight:400;color:#ff6c00}.box22222{background:url("+o(301)+");background-size:14.76470588235294rem;height:19.67647058823529rem;width:14.76470588235294rem;margin:0 auto;margin-top:10%}.title23{color:#fff;font-size:1rem;text-align:center;width:100%;margin-top:4.935294117647059rem}.title23 span{font-size:1.6rem;margin:0 4px;color:#ff6c00}.thhd1{height:1px}.content3211{text-align:left;margin-top:10%;padding:0 28px;line-height:1.8}.content3211,.width_text{font-size:.78rem;color:#fff}.width_text{width:100%;text-align:center;margin-top:2.5rem}.h222{height:16px}.moodCountPie{height:100%;background:#fff;width:100%}.moodCountPie_box{margin:1.1rem .94rem}.moodCountName{font-size:.88rem;color:#342f2f}#setPie{height:18.5rem;width:18.65rem;margin:0 auto;margin-top:-.29rem}.moodCountDay{color:#504e4e;font-size:.88rem;line-height:1.65rem;text-indent:1.2rem}.moodCountDay img{height:1rem;width:1rem;display:inline-block;vertical-align:middle;margin:0 6px;margin-top:.01rem}.moodCountPie_box span{color:#fe6c01}.moodCountDay .spanColor{color:#504e4e}.moodCountBtn{height:2.6rem;line-height:2.6rem;color:#504e4e;font-size:.8rem;text-align:center;background:rgba(254,108,1,.1);border-radius:.6rem;margin-top:1.3rem;margin-bottom:1.8rem;display:block}.moodCountBtn:active{background:rgba(254,108,1,.3)}.setPieBox{position:relative}.pieDiv{position:absolute;left:50%;font-size:.9rem;color:#fff}.pieDiv img{width:5rem;display:block}.pieLeft{text-align:left}.pieRight{text-align:right}.pietopImg{top:10%;margin-left:-5rem}.pietbottomImg{bottom:16%}",""])},301:function(t,e,o){t.exports=o.p+"box22222_bg.png"},302:function(t,e,o){t.exports=o.p+"boxoboxobo.png"},312:function(t,e,o){t.exports=o.p+"face_bg.png"},330:function(t,e,o){t.exports=o.p+"mood_count_month_bg.png"},349:function(t,e,o){t.exports=o.p+"pieLine1.png"},351:function(t,e,o){t.exports=o.p+"pieLine2.png"},370:function(t,e,o){t.exports=o.p+"toping.png"},402:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%","font-family":"STHeitiSC-Light"}},[i("div",{directives:[{name:"title",rawName:"v-title"}]},[t._v(t._s(t.countMonth)+"月心情统计")]),t._v(" "),i("div",{staticClass:"swiper-container  swarppp  bggggg",staticStyle:{height:"100%"}},[i("div",{staticClass:"swiper-wrapper "},[i("div",{staticClass:"swiper-slide page1"},[i("div",{staticClass:"toping"}),t._v(" "),i("div",{staticClass:"face_bg"},[t.theUser?i("img",{attrs:{src:t.theUser.faceUrl}}):t._e()]),t._v(" "),t.theUser?i("div",{staticClass:"name_box_bottom"},[i("span",[t._v(t._s(t.theUser.nickName))])]):t._e()]),t._v(" "),i("div",{staticClass:"swiper-slide page2"},[i("div",{staticClass:"setPieBox"},[i("div",{attrs:{id:"setPie"}}),t._v(" "),i("div",{staticClass:"pieDiv pietopImg"},[i("div",{staticClass:"pieLeft"},[t._v(t._s(t.unhappyDays)+"天不开心")]),t._v(" "),i("img",{attrs:{src:o(349),alt:""}})]),t._v(" "),i("div",{staticClass:"pieDiv pietbottomImg"},[i("div",{staticClass:"pieRight"},[t._v(t._s(t.happyDays)+"天开心")]),t._v(" "),i("img",{attrs:{src:o(351),alt:""}})])]),t._v(" "),i("div",{staticClass:"boxboxbox"},[i("div",{staticClass:"boxitemd1"},[i("h4",[t._v("最关注")]),t._v(" "),i("span",[t._v(t._s(t.followText))])]),t._v(" "),i("div",{staticClass:"boxitemd2"},[i("h4",[t._v("最开心")]),t._v(" "),i("span",[t._v(t._s(t.happyText))])]),t._v(" "),i("div",{staticClass:"boxitemd3"},[i("h4",[t._v("不开心")]),t._v(" "),i("span",[t._v(t._s(t.unhappyText))])])])]),t._v(" "),i("div",{staticClass:"swiper-slide page3"},[i("div",{staticClass:"box22222 "},[i("div",{staticClass:"thhd1"}),t._v(" "),t.moodCount>10?[i("div",{staticClass:"title23"},[t._v("比"),i("span",[t._v(t._s(t.happyThan)+"%")]),t._v("的人都要开心！")]),t._v(" "),i("div",{staticClass:"content3211"},[t._v("相比"+t._s(t.oldMonth)+"月份，你"),t.moodDifference?t._e():i("span",{staticClass:"spanColor"},[t._v("没有")]),t.moodDifference?i("span",{staticClass:"spanColor"},[t._v("比")]):t._e(),t._v("上个月过得开心，我们希望"+t._s(t.nextMonth)+"月份你能"),t.moodValue<t.lastMonthMoodValue?i("span",{staticClass:"spanColor"},[t._v("过得开心快乐一点")]):t._e(),t.moodValue>=t.lastMonthMoodValue?i("span",{staticClass:"spanColor"},[t._v("继续保持开心快乐")]):t._e(),t._v("。")])]:t._e(),t._v(" "),t.moodCount<=10?[i("div",{staticClass:"title23"},[t._v("记录得太少")]),t._v(" "),i("div",{staticClass:"content3211"},[t._v(" 由于记录数据太少，无法判断你"+t._s(t.countMonth)+"月过得是否开心？"),i("br"),i("br"),t._v("\n                            金秋"+t._s(t.nextMonth)+"月，愿你成为一个全新的自己，不蹉跎，不虚度。")])]:t._e()],2),t._v(" "),t._m(0),t._v(" "),null==t.user?i("div",{staticClass:"name_box_bottom name_box_bottom2 ",on:{click:t.follow}},[i("span",[t._v("我也要记录心情")])]):t._e(),t._v(" "),null!=t.user&&null!=t.theUser&&t.user.id!=t.theUser.id?i("div",{staticClass:"name_box_bottom name_box_bottom2 ",on:{click:t.record}},[i("span",[t._v("我也要记录心情")])]):t._e(),t._v(" "),null!=t.user&&null!=t.theUser&&t.user.id==t.theUser.id?i("div",{staticClass:"name_box_bottom name_box_bottom2",on:{click:t.goMonthAll}},[i("span",[t._v("翻看心情日历")])]):t._e()])]),t._v(" "),i("img",{staticClass:"propagandaJt",attrs:{src:o(165),alt:""}})]),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"follow2"}},[i("div",{staticClass:"dialog_follow"},[t.theUser?i("div",{staticClass:"img"},[i("img",{attrs:{src:t.theUser.faceUrl}})]):t._e(),t._v(" "),i("div",{staticClass:"ewm"}),t._v(" "),t.theUser?i("div",{staticClass:"text"},[t._v("\n                长按关注“"+t._s(t.theUser.nickName)+"”"),i("br"),t._v("记录你的心情\n            ")]):t._e()])]),t._v(" "),i("div",{staticClass:"output",staticStyle:{display:"none"},attrs:{id:"output"}})])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"width_text"},[t._v("日子有大有小，心情冷暖共知；"),o("br"),t._v("加入我们，一起记录美好时光！")])}]}},455:function(t,e,o){var i=o(253);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(2)("64685164",i,!0)},88:function(t,e,o){o(455);var i=o(1)(o(200),o(402),null,null);t.exports=i.exports}});
//# sourceMappingURL=18.build.js.map?6c92a