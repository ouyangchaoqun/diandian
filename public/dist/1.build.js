webpackJsonp([1],{159:function(t,o,e){e(202);var i=e(0)(e(170),e(196),null,null);t.exports=i.exports},163:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={props:{offset:{type:Number,default:40},enableInfinite:{type:Boolean,default:!0},enableRefresh:{type:Boolean,default:!0},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1}},data:function(){return{top:0,state:0,startY:0,touching:!1,infiniteLoading:!1,height:"height:100px"}},mounted:function(){this.height="height:"+document.body.clientHeight+"px"},methods:{touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startScroll=this.$el.scrollTop||0,this.touching=!0},touchMove:function(t){if(this.enableRefresh&&!(this.$el.scrollTop>0)&&this.touching){var o=t.targetTouches[0].pageY-this.startY-this.startScroll;o>0&&t.preventDefault(),this.top=Math.pow(o,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)}},touchEnd:function(t){if(this.enableRefresh){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0)}},refresh:function(){this.state=2,this.top=this.offset,this.onRefresh(this.refreshDone)},refreshDone:function(){this.state=0,this.top=0},infinite:function(){this.infiniteLoading=!0,this.onInfinite(this.infiniteDone)},infiniteDone:function(){this.infiniteLoading=!1},onScroll:function(t){if(this.enableInfinite&&!this.infiniteLoading){var o=this.$el.clientHeight;this.$el.querySelector(".inner").clientHeight-o-this.$el.scrollTop-(this.onRefresh?this.$el.querySelector(".pull-refresh").clientHeight:0)<this.$el.querySelector(".load-more").clientHeight&&this.infinite()}}}}},164:function(t,o,e){o=t.exports=e(1)(),o.push([t.i,".yo-scroll{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;-webkit-overflow-scrolling:touch}.yo-scroll .inner{position:absolute;top:-2rem;width:100%;transition-duration:.3s}.yo-scroll .pull-refresh{position:relative;left:0;top:0;width:100%;height:2rem;display:flex;align-items:center;justify-content:center}.yo-scroll.touch .inner{transition-duration:0ms}.yo-scroll.down .down-tip,.yo-scroll.refresh .refresh-tip,.yo-scroll.up .up-tip{display:block}.yo-scroll .down-tip,.yo-scroll .refresh-tip,.yo-scroll .up-tip{display:none}.yo-scroll .load-more{height:3rem;display:flex;align-items:center;justify-content:center}.yo-scroll .load-finish{height:2rem;text-align:center}",""])},165:function(t,o,e){e(167);var i=e(0)(e(163),e(166),null,null);t.exports=i.exports},166:function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"yo-scroll",class:{down:0===t.state,up:1==t.state,refresh:2===t.state,touch:t.touching},style:t.height,on:{touchstart:function(o){t.touchStart(o)},touchmove:function(o){t.touchMove(o)},touchend:function(o){t.touchEnd(o)},scroll:function(o){(t.onInfinite||t.infiniteLoading)&&t.onScroll(o)}}},[e("section",{staticClass:"inner",style:{transform:"translate3d(0, "+t.top+"px, 0)"}},[e("header",{staticClass:"pull-refresh"},[t._t("pull-refresh",[e("span",{staticClass:"down-tip"},[t._v("下拉更新")]),t._v(" "),e("span",{staticClass:"up-tip"},[t._v("松开更新")]),t._v(" "),e("span",{staticClass:"refresh-tip"},[t._v("更新中")])])],2),t._v(" "),t._t("default"),t._v(" "),e("footer",{staticClass:"load-more"},[t._t("load-more",[e("span",[t._v("下拉加载更多")])])],2),t._v(" "),e("footer",{staticClass:"load-finish",staticStyle:{display:"none"}},[t._t("load-finish",[e("span",[t._v("已经加载完成")])])],2)],2)])},staticRenderFns:[]}},167:function(t,o,e){var i=e(164);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(2)("18db66ab",i,!0)},170:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__chart_vue__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_0__chart_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__chart_vue__),__WEBPACK_IMPORTED_MODULE_1__banner_vue__=__webpack_require__(45),__WEBPACK_IMPORTED_MODULE_1__banner_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__banner_vue__),__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue__=__webpack_require__(165),__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue__),__WEBPACK_IMPORTED_MODULE_3_weixin_js_sdk__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_3_weixin_js_sdk___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_weixin_js_sdk__),myIndex={template:"#myIndex"};__webpack_exports__.default={data:function(){return{user:{},counter:1,num:10,pageStart:0,pageEnd:0,listdata:[],downdata:[],currTime:xqzs.dateTime.getTimeStamp(),topImg:xqzs.mood.getTopImg(),chartData:[{days:["1月1","2","3","4","5","6","7"],moods:[3,5,9,6,4,3,5]},{days:["1月8","9","10","11","12","13","14"],moods:[1,3,7,6,4,2,6]},{days:["1月15","16","17","18","19","20","21"],moods:[7,8,9,0,4,0,5]},{days:["1月22","23","24","25","26","27","28"],moods:[5,1,2,3,4,5,6]}]}},methods:{commentOrDel:function(t,o,e,i){var a=this;t===a.user.id?a._delComment(o,e,i):a.addComment(o,e,i)},_delComment:function(t,o,e){var i=this;xqzs.weui.actionSheet("删除我的评论?","删除",function(){var a=web.API_PATH+"mood/reply/[userId]/"+t;i.$http.delete(a).then(function(t){1===t.data.status?(i.downdata[o].commentList[e].isDel=!0,i.$set(i.downdata,o,i.downdata[o])):xqzs.weui.toast("fail","删除失败",function(){})}).catch(function(t){})},function(){})},addComment:function(t,o,e){var i=this;xqzs.mood.actionSheetEdit("取消","发送",function(e){i.$http.put(web.API_PATH+"mood/reply/add",{moodId:i.downdata[o].id,userId:null,replyId:t,content:e}).then(function(t){1===t.data.status&&(xqzs.weui.toast("success","提交成功",function(){}),i.downdata[o].commentList.push(t.data.data.reply),i.$set(i.downdata,o,i.downdata[o]),console.log(t.data.data.reply))},function(t){}),console.log(e)},function(t){console.log(t)},"回复 "+i.downdata[o].commentList[e].from_nickName)},showComment:function(t,o){var e=this;e.downdata[o].isShowComment?(e.downdata[o].isShowComment=!1,e.$set(e.downdata,o,e.downdata[o])):(!0!==e.downdata[o].isAsk&&e.$http.get(web.API_PATH+"mood/care/query/comment/"+t).then(function(t){e.downdata[o].isAsk=!0,1===t.data.status&&(t.data.data.care.length>0||t.data.data.reply.length>0)&&(e.downdata[o].hasComments=!0,e.downdata[o].careList=t.data.data.care,e.downdata[o].commentList=t.data.data.reply,e.downdata[o].isShowComment=!0),console.log(t.data.data),e.$set(e.downdata,o,e.downdata[o])},function(t){console.log("error")}),e.downdata[o].isShowComment=!0,e.$set(e.downdata,o,e.downdata[o]))},empty:function(t,o){var e=this;xqzs.weui.dialog("","确定删除吗？",function(){},function(){e._empty(t,o)})},_empty:function(t,o){var e=this,i=web.API_PATH+"mood/clean/content/[userId]/"+t;e.$http.delete(i).then(function(t){1===t.data.status?(e.downdata[o].content="",e.$set(e.downdata,o,e.downdata[o])):xqzs.weui.toast("fail","删除失败",function(){})}).catch(function(t){})},revoke:function(t,o){var e=this;xqzs.weui.dialog("","确定撤回吗？",function(){},function(){e._revoke(t,o)})},_revoke:function(t,o){var e=this,i=web.API_PATH+"mood/[userId]/"+t;e.$http.delete(i,{emulateJSON:!0}).then(function(t){1===t.data.status?(e.downdata[o].hide=!0,e.$set(e.downdata,o,e.downdata[o]),xqzs.weui.toast("success","撤回成功",function(){})):xqzs.weui.toast("fail","撤回失败",function(){}),console.log(t)}).catch(function(t){})},showBigImg:function(t,o){for(var e=o.bigUrl,i=[],a=0;a<t.length;a++)i.push(t[a].bigUrl);__WEBPACK_IMPORTED_MODULE_3_weixin_js_sdk___default.a.previewImage({current:e,urls:i})},getList:function(){var t=this;t.$http.get(web.API_PATH+"mood/query/user/page/[userId]/1/"+t.num).then(function(o){t.downdata=o.data.data.rows,t.downdata=xqzs.mood.initMoodsData(t.downdata),console.log(t.downdata),t.$nextTick(function(){myResizePicture()})},function(t){console.log("error")})},onRefresh:function(t){this.getList(),t()},onInfinite:function(t){var o=this,e=this;e.$http.get(web.API_PATH+"mood/query/user/page/[userId]/"+(e.counter+1)+"/"+e.num).then(function(i){e.counter++,e.pageEnd=e.num*e.counter,e.pageStart=e.pageEnd-e.num;var a=i.data.data.rows,s=0;e.pageEnd;for(a=xqzs.mood.initMoodsData(a);s<a.length;s++)e.downdata.push(a[s]);if(e.$nextTick(function(){myResizePicture()}),0===a.length)return o.$el.querySelector(".load-more").style.display="none",void(o.$el.querySelector(".load-finish").style.display="block");t()},function(t){console.log("error")})}},mounted:function mounted(){var _this=this;this.getList(),this.$http({method:"GET",type:"json",url:web.API_PATH+"user/find/by/user/Id/[userId]"}).then(function(data){null!==data.data.data&&(_this.user=eval(data.data.data))},function(t){}),_this.$http.get(web.API_PATH+"mood/get/user/mood/week/[userId]").then(function(t){if(1===t.data.status){for(var o=0;o<t.data.data.length;o++){for(var e={days:[],moods:[]},i=0;i<t.data.data[o].length;i++)e.days.push(t.data.data[o][i].day),e.moods.push(t.data.data[o][i].value);_this.$set(_this.chartData,o,e)}console.log(_this.chartData)}}).catch(function(t){})},components:{"v-scroll":__WEBPACK_IMPORTED_MODULE_2__lib_scroll_vue___default.a,"v-chart":__WEBPACK_IMPORTED_MODULE_0__chart_vue___default.a,"v-banner":__WEBPACK_IMPORTED_MODULE_1__banner_vue___default.a}}},180:function(t,o,e){o=t.exports=e(1)(),o.push([t.i,".actionSheet_wrap .doAction{font-size:16px;color:red}.actionSheet_wrap .weui-actionsheet__title-text{color:#999;font-size:13px;height:40px}.show_box{width:100%;background:#f9f9f9;border-radius:5px;margin-top:15px;position:relative}.show_box .arraw{background:#f9f9f9;width:16px;height:16px;position:absolute;top:-4px;left:11px;transform:rotate(45deg)}.show_top{padding-left:30px;padding-top:7px;padding-bottom:4px;overflow:auto;position:relative}.show_top .show_img1{position:absolute;top:15px;left:9px;width:18px;height:auto;margin:0}.show_top img{width:33px;height:33px;float:left;margin-right:5px;margin-bottom:6px}.show_bottom{position:relative;padding-left:30px;padding-bottom:4px;overflow:auto;padding-right:12px;border-top:1px solid #eee}.show_img2{width:18px;position:absolute;top:15px;left:9px}.show_bottom li{position:relative;padding:7px 0 8px;border-bottom:1px solid #eee}.show_bottom li:last-child{border-bottom:none}.show_bottom_img{width:33px;height:33px;position:absolute;top:7px;left:0}.show_bottom_text{margin-left:45px}.show_bottom_text div,.show_bottom_text span{font-size:13px;color:#333}.show_bottom_text div{line-height:20px}.show_bottom_text .pname{color:#5e61a2;font-size:13px}.show_box .show_img1,.show_box .show_img2{width:14px}.btn_del{display:inline-block;margin-left:13px;color:#5e61a2;font-size:12px}.editMood{height:34px;line-height:34px;font-size:14px;color:#999;background:#dcdcdc;display:block;padding-left:10px;border-radius:5px;margin-bottom:10px;position:relative}.editMood img{position:absolute;top:7px;right:10px;width:20px}.index_banner{position:relative}.userHeaderImg{position:absolute;left:50%;bottom:-32px;margin-left:-32px;background:hsla(0,0%,100%,.6);padding:2px}.userHeaderImg,.userHeaderImg img{height:64px;width:64px;border-radius:50%}.userHeaderImg img{margin:auto;display:block}.chart_box{height:190px;padding:40px 0 20px;background:#fff;margin-bottom:5px}.myMood_list{background:#fff;padding:16px 10px;margin-bottom:1px}.moodImg{width:40px;height:40px;display:block;float:left}.moodImg_right{margin-left:50px}.moodState{font-size:14px;margin-bottom:6px}.moodContext{font-size:14px;color:#333;line-height:20px;margin-bottom:10px}.moodPhotoLists{display:flex;height:auto;margin-right:20px;margin-bottom:15px}.moodPhotoList{float:left;margin-right:.3125rem;width:4.8675rem;height:4.8675rem;overflow:hidden;position:relative}.moodLoc{font-size:12px;color:#516591;margin-bottom:5px}.moodTime{font-size:12px;color:#787878;height:20px;line-height:20px}.moodFollow{float:right}.followCount,.followtype{float:left;margin-left:5px}.followtype{width:24px;margin-top:-2px}.moodImg_right .moodPhotoLists.two>div{width:7.5rem;height:6rem}.moodImg_right .moodPhotoLists.one>div{width:10.7rem;height:8.1rem}",""])},181:function(t,o,e){t.exports=e.p+"bianji.png?cbdeaa0d5f1a1fa38622fc013134745e"},196:function(t,o,e){t.exports={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticStyle:{position:"relative"}},[i("v-scroll",{attrs:{"on-refresh":t.onRefresh,"on-infinite":t.onInfinite}},[i("div",{staticClass:"myIndex_box"},[i("div",{staticClass:"banner index_banner"},[i("v-banner"),t._v(" "),i("div",{staticClass:"userHeaderImg"},[i("img",{attrs:{src:t.user.faceUrl,alt:""}})])],1),t._v(" "),i("div",{staticClass:"chart_box"},[i("v-chart",{attrs:{chartData:t.chartData}})],1),t._v(" "),t._l(t.downdata,function(o,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:!o.hide,expression:"!item.hide"}],key:a,staticClass:"myMood_list"},[i("img",{staticClass:"moodImg",attrs:{src:o.moodValueUrl,alt:""}}),t._v(" "),i("div",{staticClass:"moodImg_right"},[i("div",{staticClass:"moodState",class:{unhappy_txt_color:o.moodValue<=4,happy_txt_color:o.moodValue>4}},[t._v("\n                        "+t._s(o.moodValueText)+"\n                    ")]),t._v(" "),t.currTime-o.addTime<=1200&&(""==o.content||null==o.content)?[i("router-link",{staticClass:"editMood",attrs:{to:o.editLink}},[t._v("\n                            20分钟内可以补充文字和图片\n                            "),i("img",{attrs:{src:e(181),alt:""}})])]:t._e(),t._v(" "),""!=o.content&&null!=o.content?[i("div",{staticClass:"moodContext"},[t._v(t._s(o.content))]),t._v(" "),o.haspicture?i("div",{staticClass:"moodPhotoLists"},t._l(o.pics,function(e){return i("div",{staticClass:"moodPhotoList"},[i("img",{style:e.styleObject,attrs:{src:e.smallUrl,"data-bigPic":e.bigUrl,"data-w":e.picwidth,"data-h":e.picheight},on:{click:function(i){t.showBigImg(o.pics,e)}}})])})):t._e()]:t._e(),t._v(" "),""!=o.content&&null!=o.content?i("div",{staticClass:"moodLoc"},[t._v(t._s(o.address))]):t._e(),t._v(" "),i("div",{staticClass:"moodTime"},[i("span",[t._v(t._s(o.outTime))]),t._v(" "),t.currTime-o.addTime<=180&&(""==o.content||null==o.content)?i("span",{staticClass:"btn_del",on:{click:function(e){t.revoke(o.id,a)}}},[t._v("撤回")]):t._e(),t._v(" "),""!=o.content&&null!=o.content?i("span",{staticClass:"btn_del",on:{click:function(e){t.empty(o.id,a)}}},[t._v("删除")]):t._e(),t._v(" "),i("div",{staticClass:"moodFollow",on:{click:function(e){t.showComment(o.id,a)}}},[i("span",{staticClass:"followCount"},[t._v(t._s(o.careCount))]),t._v(" "),i("img",{staticClass:"followtype",attrs:{src:o.careImg,alt:""}}),t._v(" "),null!==o.content&&""!==o.content?[i("span",{staticClass:"followCount"},[t._v(t._s(o.replycount))]),t._v(" "),i("img",{staticClass:"followtype",staticStyle:{width:"18px","margin-top":"3px"},attrs:{src:e(44),alt:""}})]:t._e()],2)])],2),t._v(" "),o.hasComments&&o.isShowComment?i("div",{staticClass:"show_box"},[i("div",{staticClass:"arraw"}),t._v(" "),i("div",{staticClass:"show_top"},[i("img",{staticClass:"show_img1",attrs:{src:e(3)}}),t._v(" "),t._l(o.careList,function(t){return i("img",{attrs:{src:t.faceUrl}})})],2),t._v(" "),i("ul",{staticClass:"show_bottom"},[i("img",{staticClass:"show_img2",attrs:{src:e(44)}}),t._v(" "),t._l(o.commentList,function(e,s){return e.isDel?t._e():i("li",{key:s,attrs:{"data-replyid":e.id,"data-moodid":o.id,"data-userid":e.fromuserid,"data-ajaxresult":"hasface"},on:{click:function(o){t.commentOrDel(e.fromuserid,e.id,a,s)}}},[i("img",{staticClass:"show_bottom_img",attrs:{src:e.from_faceUrl}}),t._v(" "),i("div",{staticClass:"show_bottom_text"},[i("div",{staticClass:"reply_author"},[i("a",{staticClass:"pname other",attrs:{href:"javascript:;"}},[t._v(t._s(e.from_nickName))])]),t._v(" "),i("div",{staticClass:"reply_content"},[e.tomoodreplyid>0?[i("span",{staticClass:"text_comment"},[t._v("回复")]),i("a",{staticClass:"pname other",attrs:{href:"javascript:;"}},[t._v(t._s(e.to_nickName)+"：")])]:t._e(),t._v(" "),i("span",{staticClass:"text_comment"},[t._v(t._s(e.content))])],2)])])})],2)]):t._e()])})],2)])],1)},staticRenderFns:[]}},202:function(t,o,e){var i=e(180);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(2)("53b9f6d5",i,!0)}});
//# sourceMappingURL=1.build.js.map