webpackJsonp([33],{130:function(t,e,s){s(625);var a=s(1)(s(273),s(557),null,null);t.exports=a.exports},146:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={data:function(){return{}}}},147:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,"",""])},148:function(t,e,s){s(150);var a=s(1)(s(146),s(149),null,null);t.exports=a.exports},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"weui-mask_transparent"}),t._v(" "),s("div",{staticClass:"weui-toast"},[s("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),s("p",{staticClass:"weui-toast__content"},[t._v("数据加载中")])])])}]}},150:function(t,e,s){var a=s(147);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("5de0c1c0",a,!0)},273:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=(s(66),s(148)),i=s.n(a);e.default={data:function(){return{testId:"",testDetail:{},payed:0,showLoad:!1,htmlover:!1,theUser:null,page:1,messageList:[],resultId:"",isEndPage:!1,isMessage:!1}},mounted:function(){var t=this;t.showLoad=!0,t.testId=t.$route.query.testId;var e=t.$route.query.start,s="";web.guest&&(this.isGuest=!0,s="?guest=true"),t.$http.get(web.API_PATH+"user/find/by/user/Id/_userId_").then(function(a){1==a.data.status?t.theUser=a.data.data.id:t.theUser=0,t.$http.get(web.API_PATH+"test/get/"+t.testId+"/"+t.theUser+s).then(function(s){t.showLoad=!1,t.htmlover=!0,1===s.data.status&&(console.log(s.data.data),t.testDetail=s.data.data,t.payed=s.data.data.payed,t.answerId=s.data.data.lastAnswerId,t.resultId=s.data.data.resultId,e&&t.payed&&t.$router.replace("/testQuestions?testId="+t.testId)),xqzs.wx.shareConfig.test.desc=t.testDetail.share_title,xqzs.wx.shareConfig.test.link=web.BASE_PATH+"#/psychtestDetail?testId="+t.testId,xqzs.wx.setConfig(t,!1,xqzs.wx.shareConfig.test)},function(t){})}),t.getMessageList()},components:{"v-showLoad":i.a},methods:{startTest:function(){var t=this;console.log(t.payed),1==t.payed?t.$router.replace("/testQuestions?testId="+t.testId):t.goPay()},goPay:function(){var t=this;t.$http.put(web.API_PATH+"test/create/order/_userId_/"+t.testId).then(function(t){var e=t.data.data,s=web.BASE_PATH+"wxpay.php?appId="+e.appId+"&timeStamp="+e.timeStamp+"&nonceStr="+e.nonceStr+"&package="+e.package+"&signType="+e.signType+"&paySign="+e.paySign+"&reurl="+encodeURIComponent(window.location.href+"&start=1");window.location.href=s})},viewResult:function(){var t=this;null!=t.answerId&&t.$router.push({path:"/testResult",query:{answerId:t.answerId,resultId:t.resultId}})},getMessageList:function(){var t=this;if(!t.isEndPage){t.showLoad=!0;t.$http.get(web.API_PATH+"test/evaluate/list/"+t.testId+"/"+t.page+"/5").then(function(e){1==e.data.status&&(e.data.data.length<5&&(t.isEndPage=!0),t.messageList=t.messageList.concat(e.data.data),t.showLoad=!1,t.messageList.length>0?t.isMessage=!0:t.isMessage=!1),console.log(t.messageList)}),t.page++}},formatDateText:function(t){return xqzs.dateTime.getTimeFormatText(t)}}}},354:function(t,e,s){e=t.exports=s(0)(),e.push([t.i,".psychtestDetail{background:#fff;height:100%;position:relative}.psychtestDetail_header{border-bottom:.588235rem solid #f2f2f5}.psychtestDetail_title{color:#000;font-size:1.17647rem;margin-top:1.117647rem;margin-bottom:1rem;text-align:center}.psychtestDetail_class{font-size:.8235rem;color:#828282;line-height:1;margin-bottom:1.35294rem;text-align:center}.psychtestDetail .addBottomText img{max-width:100%;width:auto}.psychtestDetail_flex{color:#999;font-size:.70588235rem;line-height:1;display:flex;display:-webkit-flex;text-align:center;padding:0 1rem;margin-bottom:1.4rem}.psychtestDetail_flex>div{flex:1}.psychtestDetail_flex>div:first-of-type{text-align:left}.psychtestDetail_flex>div:nth-of-type(3){text-align:right}.psychtestDetail_flex span{width:5px;height:5px;display:inline-block;background:#999;border-radius:50%;vertical-align:middle;margin-top:-3px}.psychtestDetail_main{padding:1.76471rem}.psychtestDetail_main_addStyle{background:#f8f8f8;margin:0 1.176471rem;border-radius:5px;padding:1.76471rem 1.176471rem;margin-bottom:20px}.psychtestDetail img{width:100%;display:block;margin:0 auto}.psychtestDetail .messageList{padding-bottom:4rem;padding-left:1.176471rem}.psychtestDetail .messageList li{position:relative;border-bottom:1px solid #eee;padding-bottom:.5rem;margin-bottom:.88235rem}.psychtestDetail .messageList img{width:2rem;height:2rem;border-radius:5px;position:absolute;top:0}.psychtestDetail .message_right{margin-left:2.8rem;padding-right:.88235rem;color:#333;font-size:.8235rem}.psychtestDetail .message_right span{font-size:.8235rem;color:#888;display:block;line-height:1;padding-top:.2rem;margin-bottom:.35rem}.psychtestDetail .moreClass{width:6rem;padding:.176471rem 0;color:#999;border:1px solid #ccc;text-align:center;font-size:.8235rem;border-radius:1rem;margin:0 auto;margin-top:.88235rem}.psychtestDetail .moreClass:active{background:#eee}.psychtestDetail_btn{background:#fd7306;color:#fff;width:30%}.psych_test_btn_box .noTestStyle{width:55%}.psych_test_btn_price{width:45%;background:#f2f2f5;color:#fe7301;font-size:1.0588235rem}.psych_test_btn_price span{color:#666;font-size:.70588235rem;text-decoration:line-through;margin-left:.471rem}.psychtestDetail_btn:active{background:#d86204}.psych_test_btn_view{background:#fda333;text-align:center;color:#fff;width:25%}.psych_test_btn_view:active{background:#d39207}.psych_test_btn_box{height:2.588rem;position:fixed;bottom:0;width:100%;line-height:2.588rem;border-radius:0;display:-webkit-box;display:flex;text-align:center;font-size:.88235rem}.psychtestDetail .addBottomLine{font-size:1.0588235rem;margin:0 auto;text-align:center;color:#fe7301;line-height:1;margin-bottom:.588235rem}.psychtestDetail .addBottomText{padding:0}.message_right .messageTime{color:#999;font-size:.70588235rem;font-style:normal}.psychtestDetail .addBottomText p:last-of-type{margin:0}.addBottom .bottom_line{width:1.8235rem;height:.176471rem;background:#ddddde;border-radius:1.5px;margin:0 auto;margin-bottom:1rem}",""])},557:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"psychtestDetail"},[t.showLoad?s("v-showLoad"):t._e(),t._v(" "),t.htmlover?s("div",[s("div",{staticClass:"psychtestDetail_header"},[s("img",{attrs:{src:t.testDetail.pic,alt:""}}),t._v(" "),s("h2",{staticClass:"psychtestDetail_title"},[t._v(t._s(t.testDetail.title))]),t._v(" "),s("div",{staticClass:"psychtestDetail_class"},[t._v(t._s(t.testDetail.sub_title))]),t._v(" "),s("div",{staticClass:"psychtestDetail_flex"},[s("div",[s("span"),t._v("\n                    "+t._s(t.testDetail.question_count)+"道精选问题\n                ")]),t._v(" "),t._m(0),t._v(" "),s("div",[s("span"),t._v("\n                    "+t._s(t.testDetail.count)+"人测试过\n                ")])])]),t._v(" "),s("div",{staticClass:"psychtestDetail_main"},[s("div",{staticClass:"addBottom"},[t._m(1),t._v(" "),s("div",{staticClass:"addBottomText",domProps:{innerHTML:t._s(t.testDetail.des)}})])]),t._v(" "),s("div",{staticClass:"psychtestDetail_main psychtestDetail_main_addStyle"},[s("div",{staticClass:"addBottom"},[t._m(2),t._v(" "),s("div",{staticClass:"addBottomText",domProps:{innerHTML:t._s(t.testDetail.notice)}})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMessage,expression:"!isMessage"}],staticStyle:{height:"4rem"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMessage,expression:"isMessage"}]},[s("div",{staticStyle:{height:"10px",background:"#f4f4f8"}}),t._v(" "),t._m(3),t._v(" "),s("ul",{staticClass:"messageList"},[t._l(t.messageList,function(e){return s("li",[s("img",{attrs:{src:e.faceUrl||e.sysFaceUrl,alt:""}}),t._v(" "),s("div",{staticClass:"message_right"},[s("span",[e.isLooked?t._e():[t._v(t._s(e.nickName||e.sysNickName))],t._v(" "),e.isLooked?[t._v("匿名")]:t._e()],2),t._v(" "),s("div",[t._v(t._s(e.content))]),t._v(" "),s("i",{staticClass:"messageTime"},[t._v(t._s(t.formatDateText(e.addTime)))])])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEndPage,expression:"!isEndPage"}],staticClass:"moreClass",on:{click:function(e){t.getMessageList()}}},[t._v("查看更多")])],2)]),t._v(" "),s("div",{staticClass:"psych_test_btn_box"},[1==t.testDetail.status?[s("div",{staticClass:"psych_test_btn_price",class:{noTestStyle:null==t.testDetail.lastAnswerId}},[t._v("￥"+t._s(t.testDetail.price.toFixed(2))+" "),s("span",[t._v("￥"+t._s(t.testDetail.old_price.toFixed(2)))])]),t._v(" "),null!=t.testDetail.lastAnswerId?s("div",{staticClass:"psych_test_btn_view",on:{click:function(e){t.viewResult()}}},[t._v("查看报告")]):t._e(),t._v(" "),s("div",{staticClass:"psychtestDetail_btn",class:{noTestStyle:null==t.testDetail.lastAnswerId},on:{click:function(e){t.startTest()}}},[1==t.payed?[t._v("继续测试")]:t._e(),t._v(" "),0==t.payed?[t._v("立即购买")]:t._e()],2)]:t._e()],2)]):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span"),t._v("\n                    1份专业报告\n                ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"addBottomLine"},[t._v("评测介绍")]),t._v(" "),s("div",{staticClass:"bottom_line"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"addBottomLine"},[t._v("评测须知")]),t._v(" "),s("div",{staticClass:"bottom_line"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"padding-top":"1.76471rem"}},[s("div",{staticClass:"addBottom"},[s("div",[s("div",{staticClass:"addBottomLine"},[t._v("用户评价")]),t._v(" "),s("div",{staticClass:"bottom_line"})])])])}]}},625:function(t,e,s){var a=s(354);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("2bb0428b",a,!0)}});
//# sourceMappingURL=33.build.js.map?5c7fdce1